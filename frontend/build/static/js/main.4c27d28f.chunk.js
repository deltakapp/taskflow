(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{126:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(26),s=n.n(a),o=n(2),i=n(12),l=n(4),u=n(21),d=n(0);function j(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(l.a,{})})}var b=n(3),p=n.n(b),h=n(6),O=n(5),f="localhost"===window.location.hostname?"http://localhost:5000":"https://taskflow.herokuapp.com";function x(e){var t=Object(o.c)(),n=Object(l.g)(),r=Object(o.d)((function(e){return e.user}),o.b);function a(){return(a=Object(O.a)(p.a.mark((function e(n){var c,r,a,s,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c=document.getElementById("user-email"),r=document.getElementById("user-password"),a={method:"POST",cache:"no-store",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c.value,password:r.value})},e.next=6,fetch("".concat(f,"/api/users/login"),a);case 6:if(!(s=e.sent).ok){e.next=15;break}return e.next=10,s.json();case 10:o=e.sent,console.log(o),t({type:"user/loggedIn",payload:Object(h.a)(Object(h.a)({},o.user),{},{token:o.token})}),e.next=20;break;case 15:return e.next=17,s.json();case 17:i=e.sent,console.log(i.message||s),t({type:"user/failedLogin"});case 20:c.value="",r.value="";case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){r.id&&setTimeout((function(){n("../user/".concat(r.id))}),1500)}),[r.id,n]),r.id?Object(d.jsx)("h1",{children:"You are logged in and will be redirected"}):Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Login"}),Object(d.jsxs)("form",{onSubmit:function(e){return a.apply(this,arguments)},children:[Object(d.jsx)("p",{children:"Email"}),Object(d.jsx)("input",{id:"user-email",type:"text"}),Object(d.jsx)("p",{children:"Password"}),Object(d.jsx)("input",{id:"user-password",type:"text"}),Object(d.jsx)("button",{type:"submit",children:"Log In"})]})]})}function g(){var e=Object(o.c)(),t=Object(l.g)(),n=Object(o.d)((function(e){return e.user}),o.b);function r(){return(r=Object(O.a)(p.a.mark((function t(n){var c,r,a,s,o,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c=document.getElementById("user-email"),r=document.getElementById("user-password"),a={method:"POST",cache:"no-store",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c.value,password:r.value})},t.next=6,fetch("".concat(f,"/api/users/login"),a);case 6:if(!(s=t.sent).ok){t.next=15;break}return t.next=10,s.json();case 10:o=t.sent,console.log(o),e({type:"user/loggedIn",payload:Object(h.a)(Object(h.a)({},o.user),{},{token:o.token})}),t.next=20;break;case 15:return t.next=17,s.json();case 17:i=t.sent,console.log(i.message||s),e({type:"user/failedLogin"});case 20:c.value="",r.value="";case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){n.id&&setTimeout((function(){t("../user/".concat(n.id))}),1500)}),[n.id,t]),Object(d.jsxs)("main",{className:"home",children:[Object(d.jsx)("img",{className:"logo",alt:"Taskflow.tech",src:"/logo.png"}),Object(d.jsx)("h1",{children:Object(d.jsx)("a",{href:"/",children:"Taskflow.tech"})}),Object(d.jsx)("h2",{children:"Login"}),Object(d.jsxs)("form",{onSubmit:function(e){return r.apply(this,arguments)},children:[Object(d.jsx)("input",{id:"user-email",type:"text",placeholder:"E-mail"}),Object(d.jsx)("input",{id:"user-password",type:"password",placeholder:"Password"}),Object(d.jsx)("button",{type:"submit",children:"Log In"})]}),Object(d.jsx)("h3",{children:Object(d.jsx)(i.b,{to:"/signup",children:"Sign Up"})})]})}function m(){var e=Object(l.g)(),t=Object(o.c)(),n=Object(o.d)((function(e){return e.user.token}),o.b);return Object(c.useEffect)((function(){Object(O.a)(p.a.mark((function e(){var t,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",cache:"no-store",headers:{Authorization:"Bearer ".concat(n)}},console.log(t),e.next=4,fetch("".concat(f,"/api/users/logout"),t);case 4:c=e.sent,console.log(c);case 6:case"end":return e.stop()}}),e)})))(),t({type:"user/loggedOut"}),setTimeout((function(){e("/")}),1500)}),[n,e,t]),Object(d.jsx)("h2",{children:"You have been logged out and will be redirected"})}var v=n(23),y=n(48);function k(){var e=Object(o.d)((function(e){return e.user.id})),t=Object(l.g)();Object(c.useEffect)((function(){e||t("/")}),[e,t])}n(62);var w=n(7),I=(n(63),"projectTab");function N(e){var t=e.index,n=e.title,r=e.reorderProject,a=e.loadProject,s=Object(c.useRef)(null),o=Object(v.useDrop)({accept:I,hover:function(e,n){var c;if(s.current){var a=e.index,o=t;if(a!==o){var i=null===(c=s.current)||void 0===c?void 0:c.getBoundingClientRect(),l=(i.right-i.left)/2,u=n.getClientOffset().x-i.left;a<o&&u<l||a>o&&u>l||(r(a,o),e.index=o)}}}}),i=Object(w.a)(o,2)[1],l=Object(v.useDrag)({type:I,item:function(){return{title:n,index:t}},collect:function(e){return{isDragging:e.isDragging()}}}),u=Object(w.a)(l,2),j=u[0].isDragging?0:1;return(0,u[1])(i(s)),Object(d.jsx)("li",{ref:s,style:{opacity:j},children:Object(d.jsx)("button",{className:"btn",onClick:function(){return a(n)},children:n})})}function C(e){var t=Object(c.useState)(!1),n=Object(w.a)(t,2),r=n[0],a=n[1],s=Object(o.d)((function(e){return e.user.projects}),o.b),i=Object(o.c)(),u=Object(l.g)(),j=Object(o.d)((function(e){return e.user}),o.b);Object(c.useEffect)(Object(O.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"PATCH",headers:{Authorization:"Bearer ".concat(j.token),"Content-Type":"application/json"},body:JSON.stringify({projects:s})},e.next=3,fetch("".concat(f,"/api/users/").concat(j.id),t);case 3:(n=e.sent).ok?console.log(n):console.log(s);case 5:case"end":return e.stop()}}),e)}))),[s,j.token]);var b=Object(c.useCallback)(function(){var e=Object(O.a)(p.a.mark((function e(t){var n,c,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={method:"POST",headers:{Authorization:"Bearer ".concat(j.token),"Content-Type":"application/json"},body:JSON.stringify({title:"".concat(document.getElementById("new-project-title").value)})},e.next=4,fetch("".concat(f,"/api/projects/"),n);case 4:if(!(c=e.sent).ok){e.next=14;break}return e.next=8,c.json();case 8:r=e.sent,console.log(r),i({type:"project/created",payload:r}),a(!1),e.next=15;break;case 14:console.log(c.status);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[j.token,i]),h=Object(c.useCallback)(function(){var e=Object(O.a)(p.a.mark((function e(t){var n,c,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",headers:{Authorization:"Bearer ".concat(j.token)}},e.next=3,fetch("".concat(f,"/api/projects/").concat(t),n);case 3:if(!(c=e.sent).ok){e.next=13;break}return e.next=7,c.json();case 7:r=e.sent,console.log(r),i({type:"project/loaded",payload:{id:t,stages:r}}),u("../project/".concat(t)),e.next=14;break;case 13:console.log(c.status);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[j.token,i,u]),x=Object(c.useCallback)((function(e,t){console.log(e,t),i({type:"user/reorderProject",payload:{sourceIndex:e,hoverIndex:t}})}),[i]),g=Object(c.useCallback)((function(e,t){return Object(d.jsx)(N,{index:t,title:e,reorderProject:x,loadProject:h},e)}),[x,h]),m=r?Object(d.jsx)("div",{className:"overlay",children:Object(d.jsx)("div",{className:"overlay-inner",children:Object(d.jsxs)("form",{id:"new-project-creator",onSubmit:b,children:[Object(d.jsx)("label",{htmlFor:"new-project-title",children:"New Project:"}),Object(d.jsx)("input",{id:"new-project-title"}),Object(d.jsxs)("div",{className:"two-button mt-2",children:[Object(d.jsx)("button",{id:"submit",children:"Create Project"}),Object(d.jsx)("button",{className:"btn-close-task-creator ml-1",onClick:function(){return a(!1)},type:"button",children:"Cancel"})]})]})})}):Object(d.jsx)("li",{className:"add-project",children:Object(d.jsx)("button",{onClick:function(){return a(!0)},title:"Add new project",children:Object(d.jsx)("svg",{height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16","data-view-component":"true",children:Object(d.jsx)("path",{fillRule:"evenodd",d:"M7.75 2a.75.75 0 01.75.75V7h4.25a.75.75 0 110 1.5H8.5v4.25a.75.75 0 11-1.5 0V8.5H2.75a.75.75 0 010-1.5H7V2.75A.75.75 0 017.75 2z"})})})});return Object(d.jsxs)("nav",{id:"navbar",children:[Object(d.jsxs)("ul",{className:"tabrow",children:[null===s||void 0===s?void 0:s.map((function(e,t){return g(e,t)})),m]}),Object(d.jsx)("br",{})]})}n(126),n(127);function S(){var e=Object(l.g)(),t=Object(o.c)(),n=Object(o.d)((function(e){return e.user}),o.b);return n.id?Object(d.jsxs)("div",{id:"user-tab",className:"float-right",children:[Object(d.jsx)("button",{id:"btn-user",onClick:function(c){c.preventDefault(),t({type:"project/unloaded"}),e("user/".concat(n.id))},children:n.name||"Anonymous User"}),Object(d.jsx)(i.b,{to:"logout",id:"btn-logout",children:"Log Out"})]}):Object(d.jsx)("div",{id:"user-tab",children:Object(d.jsx)(i.b,{to:"login",id:"btn-login",children:"Log In"})})}function T(){var e=Object(o.d)((function(e){return e.project.id}));return console.log("rendering PageHeader"),Object(d.jsxs)("header",{id:"page-header",children:[Object(d.jsx)("img",{className:"logo",alt:"logo",src:"/logo-smol.png"}),Object(d.jsx)(S,{}),!e&&Object(d.jsx)("h2",{id:"app-subtitle",children:"Collaborative Project Management"})]})}n(128),n(129);function E(e){var t=e.projectId,n=(e.stageId,e.stageIndex,Object(c.useState)(!1)),r=Object(w.a)(n,2),a=r[0],s=r[1],i=Object(o.d)((function(e){return e.user}),o.b),l=Object(o.c)();function u(){return(u=Object(O.a)(p.a.mark((function e(n){var c,r,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.target.querySelector(".rename"),console.log(c),console.log(c.value),r={method:"PATCH",headers:{Authorization:"Bearer ".concat(i.token),"Content-Type":"application/json"},body:JSON.stringify({title:"".concat(c.value)})},e.next=6,fetch("".concat(f,"/api/projects/").concat(t,"/stages/").concat(n),r);case 6:if(!(a=e.sent).ok){e.next=15;break}return e.next=10,a.json();case 10:s=e.sent,console.log(s),l({type:"stage/updated",payload:{stage:s}}),e.next=16;break;case 15:console.log(a.status);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a?Object(d.jsx)("div",{class:"overlay",children:Object(d.jsx)("div",{class:"overlay-inner",children:Object(d.jsxs)("form",{className:"stage-rename",onSubmit:function(e){return u.apply(this,arguments)},children:[Object(d.jsx)("label",{for:"rename",children:"Rename Stage:"}),Object(d.jsx)("input",{type:"text",className:"rename",maxLength:"30"}),Object(d.jsxs)("div",{className:"two-button mt-2",children:[Object(d.jsx)("button",{className:"btn-stage-rename mr-1",type:"submit",children:"Rename"}),Object(d.jsx)("button",{className:"btn-close-stage-rename ml-1",onClick:function(){return s(!1)},type:"button",children:"Cancel"})]})]})})}):Object(d.jsx)("button",{className:"btn",onClick:function(){return s(!0)},children:"Rename Stage"})}n(130);function B(e){var t=e.taskIndex,n=e.stageIndex,c=e.stageId,r=e.projectId,a=Object(o.d)((function(e){return e.project.stages[n].tasks[t]})),s=Object(o.d)((function(e){return e.user}),o.b),i=Object(o.c)();function l(){return(l=Object(O.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"DELETE",headers:{Authorization:"Bearer ".concat(s.token)}},e.next=3,fetch("".concat(f,"/api/projects/").concat(r,"/stages/").concat(c,"/tasks/").concat(a.id),t);case 3:(n=e.sent)&&console.log("response received"),n.ok?(console.log("dispatching delete"),i({type:"task/deleted",payload:{id:a.id,stageId:c}})):console.log(n.status);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(d.jsxs)("div",{className:"task",children:[Object(d.jsx)("p",{className:"float-left",children:a.title}),Object(d.jsx)("button",{className:"btn-task-settings float-right",children:"\u2699\ufe0f"}),Object(d.jsx)("button",{className:"btn-task-delete float-right",onClick:function(){return function(){return l.apply(this,arguments)}()},children:"\u274c"})]})}function P(e){var t=e.projectId,n=e.stageId,r=(e.stageIndex,Object(c.useState)(!1)),a=Object(w.a)(r,2),s=a[0],i=a[1],l=Object(o.d)((function(e){return e.user}),o.b),u=Object(o.c)();function j(){return(j=Object(O.a)(p.a.mark((function e(c){var r,a,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),r=c.target.querySelector(".new-task-title"),a={method:"POST",headers:{Authorization:"Bearer ".concat(l.token),"Content-Type":"application/json"},body:JSON.stringify({title:"".concat(r.value)})},e.next=5,fetch("".concat(f,"/api/projects/").concat(t,"/stages/").concat(n,"/tasks"),a);case 5:if(!(s=e.sent).ok){e.next=15;break}return e.next=9,s.json();case 9:o=e.sent,console.log(o),u({type:"task/created",payload:{task:Object(h.a)({},o),stageId:n}}),r.value="",e.next=16;break;case 15:console.log(s);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return s?Object(d.jsx)("div",{className:"task-creator",children:Object(d.jsxs)("form",{onSubmit:function(e){return j.apply(this,arguments)},children:[Object(d.jsx)("textarea",{className:"new-task-title",placeholder:"Enter a task",maxlength:"31"}),Object(d.jsxs)("div",{className:"two-button mt-2",children:[Object(d.jsx)("button",{className:"btn-create-task mr-1",type:"submit",children:"Create Task"}),Object(d.jsx)("button",{className:"btn-close-task-creator ml-1",onClick:function(){return i(!1)},type:"button",children:"Cancel"})]})]})}):Object(d.jsx)("div",{className:"task-creator float-right",children:Object(d.jsx)("button",{className:"btn-open-task-creator",onClick:function(){return i(!0)},children:Object(d.jsx)("svg",{height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16","data-view-component":"true",className:"mr-2",children:Object(d.jsx)("path",{fillRule:"evenodd",d:"M7.75 2a.75.75 0 01.75.75V7h4.25a.75.75 0 110 1.5H8.5v4.25a.75.75 0 11-1.5 0V8.5H2.75a.75.75 0 010-1.5H7V2.75A.75.75 0 017.75 2z"})})})})}function D(e){var t=e.id,n=e.stageIndex,c=e.projectId;console.log("Rendering stage ".concat(n));var r=Object(o.d)((function(e){return e.project.stages[n]})),a=Object(o.d)((function(e){return e.project.stages[n].tasks})),s=Object(o.d)((function(e){return e.user}),o.b),i=Object(o.c)();function l(){return l=Object(O.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"DELETE",headers:{Authorization:"Bearer ".concat(s.token)}},e.next=3,fetch("".concat(f,"/api/projects/").concat(c,"/stages/").concat(t),n);case 3:(r=e.sent).ok?i({type:"stage/deleted",payload:{id:t}}):console.log(r.status);case 5:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}var u=a?a.map((function(e,r){return Object(d.jsx)(B,{taskIndex:r,stageIndex:n,stageId:t,projectId:c},e.id)})):null;return Object(d.jsxs)("section",{className:"stage",children:[Object(d.jsx)("div",{className:"stage-header",children:Object(d.jsxs)("details",{className:"dropdown",children:[Object(d.jsxs)("summary",{className:"",role:"button",children:[Object(d.jsx)("h3",{className:"stage-title",children:r.title}),Object(d.jsx)("svg",{height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16","data-view-component":"true",className:"float-right",children:Object(d.jsx)("path",{d:"M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})}),Object(d.jsx)(P,{projectId:c,stageId:r.id,stageIndex:n})]}),Object(d.jsx)("span",{className:"dropdown-content mt-4",children:Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)(E,{projectId:c,stageId:r.id,stageIndex:n})}),Object(d.jsx)("li",{children:Object(d.jsx)("button",{className:"btn",onClick:function(){return function(e){return l.apply(this,arguments)}(t)},children:"Delete Stage"})})]})})]})}),u]},t)}function L(e){var t=e.projectId,n=Object(c.useState)(!1),r=Object(w.a)(n,2),a=r[0],s=r[1],i=Object(o.d)((function(e){return e.user}),o.b),l=Object(o.c)();function u(){return(u=Object(O.a)(p.a.mark((function e(n){var c,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c={method:"POST",headers:{Authorization:"Bearer ".concat(i.token),"Content-Type":"application/json"},body:JSON.stringify({title:"".concat(document.getElementById("new-stage-title").value)})},e.next=4,fetch("".concat(f,"/api/projects/").concat(t,"/stages"),c);case 4:if(!(r=e.sent).ok){e.next=14;break}return e.next=8,r.json();case 8:a=e.sent,console.log(a),l({type:"stage/created",payload:a}),s(!1),e.next=15;break;case 14:console.log(r);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a?Object(d.jsx)("div",{class:"overlay",children:Object(d.jsx)("div",{class:"overlay-inner",children:Object(d.jsxs)("form",{onSubmit:function(e){return u.apply(this,arguments)},children:[Object(d.jsx)("label",{for:"new-stage-title",children:"Create Stage:"}),Object(d.jsx)("input",{type:"text",id:"new-stage-title",maxLength:"29",required:!0}),Object(d.jsxs)("div",{className:"two-button mt-2",children:[Object(d.jsx)("button",{className:"btn-create-stage",type:"submit",children:"Create Stage"}),Object(d.jsx)("button",{className:"btn-toggle-stage-creator",onClick:function(){return s(!1)},children:"Cancel"})]})]})})}):Object(d.jsx)("section",{className:"stage create",children:Object(d.jsx)("button",{className:"btn",onClick:function(){return s(!0)},children:"Create Stage"})})}function A(){var e=Object(o.d)((function(e){return e.project.id})),t=Object(o.d)((function(e){return e.project.stages}),o.b);console.log("project page render"),k();var n=t?t.map((function(t,n){return Object(d.jsx)(D,{id:t.id,stageIndex:n,projectId:e},t.id)})):null;return Object(d.jsxs)(v.DndProvider,{backend:y.HTML5Backend,children:[Object(d.jsx)(T,{}),Object(d.jsx)(C,{}),Object(d.jsx)("main",{children:Object(d.jsx)("div",{id:"project-board",children:Object(d.jsxs)("div",{id:"stages-panel",children:[n,Object(d.jsx)(L,{projectId:e})]})})})]})}function z(){var e=Object(o.c)();function t(){return(t=Object(O.a)(p.a.mark((function t(n){var c,r,a,s,o,i,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c=document.getElementById("user-name"),r=document.getElementById("user-email"),a=document.getElementById("user-password"),s={method:"POST",cache:"no-store",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c.value,email:r.value,password:a.value})},console.log(s),t.next=8,fetch("".concat(f,"/api/users"),s);case 8:if(!(o=t.sent).ok){t.next=17;break}return t.next=12,o.json();case 12:i=t.sent,console.log(i),e({type:"user/created",payload:Object(h.a)(Object(h.a)({},i.user),{},{token:i.token})}),t.next=22;break;case 17:return t.next=19,o.json();case 19:l=t.sent,console.log(l.message||o),e({type:"user/failedLogin"});case 22:c.value="",r.value="",a.value="";case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(o.d)((function(e){return e.user}),o.b).id?Object(d.jsx)("h1",{children:"User is logged in"}):Object(d.jsxs)("main",{id:"signup-page",children:["Sign Up:",Object(d.jsxs)("form",{onSubmit:function(e){return t.apply(this,arguments)},children:[Object(d.jsx)("span",{children:"User Name: "}),Object(d.jsx)("input",{id:"user-name",type:"text"}),Object(d.jsx)("br",{}),Object(d.jsx)("span",{children:"Email: "}),Object(d.jsx)("input",{id:"user-email",type:"text"}),Object(d.jsx)("br",{}),Object(d.jsx)("span",{children:"Password: "}),Object(d.jsx)("input",{id:"user-password",type:"text"}),Object(d.jsx)("button",{type:"submit",children:"Sign Up"})]})]})}function J(){return Object(d.jsx)("h1",{children:"Unsaved Project"})}n(143);function H(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.user.projects}),o.b),n=Object(l.g)(),c=Object(o.d)((function(e){return e.user}),o.b);function r(){return(r=Object(O.a)(p.a.mark((function t(n){var r,a,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r={method:"POST",headers:{Authorization:"Bearer ".concat(c.token),"Content-Type":"application/json"},body:JSON.stringify({title:"".concat(document.getElementById("new-project-title").value)})},t.next=4,fetch("".concat(f,"/api/projects/"),r);case 4:if(!(a=t.sent).ok){t.next=13;break}return t.next=8,a.json();case 8:s=t.sent,console.log(s),e({type:"project/created",payload:s}),t.next=14;break;case 13:console.log(a.status);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function a(){return(a=Object(O.a)(p.a.mark((function t(n){var r,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"DELETE",headers:{Authorization:"Bearer ".concat(c.token),"Content-Type":"application/json"}},t.next=3,fetch("".concat(f,"/api/projects/").concat(n),r);case 3:(a=t.sent).ok?e({type:"project/deleted",payload:{id:n}}):console.log(a.status);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=Object(O.a)(p.a.mark((function t(r){var a,s,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={method:"GET",headers:{Authorization:"Bearer ".concat(c.token),"Content-Type":"application/json"}},t.next=3,fetch("".concat(f,"/api/projects/").concat(r),a);case 3:if(!(s=t.sent).ok){t.next=11;break}return t.next=7,s.json();case 7:o=t.sent,console.log(o),e({type:"project/loaded",payload:{id:r,stages:o}}),n("../project/".concat(r));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var i=t?t.map((function(e){return Object(d.jsxs)("li",{children:[e,Object(d.jsx)("button",{onClick:function(){return function(e){return s.apply(this,arguments)}(e)},children:"Edit"}),Object(d.jsx)("button",{onClick:function(){return function(e){return a.apply(this,arguments)}(e)},children:"Delete"})]},e)})):null;return Object(d.jsxs)("div",{id:"projects-menu",children:[t&&Object(d.jsx)("ul",{id:"projects-list",children:i}),Object(d.jsxs)("form",{id:"new-project-creator",onSubmit:function(e){return r.apply(this,arguments)},children:[Object(d.jsx)("h3",{children:"Create a new project"}),Object(d.jsx)("h3",{children:"Titled:"}),Object(d.jsx)("input",{id:"new-project-title"}),Object(d.jsx)("button",{id:"submit",children:"Create Project"})]})]})}function R(){return k(),Object(d.jsx)(H,{})}var M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,147)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},F={id:null,title:"",stages:[]};var U=n(49),G={};var V=Object(u.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0,n=Object(h.a)({},e);switch(t.type){case"user/reorderProject":var c=t.payload,r=c.sourceIndex,a=c.hoverIndex,s=Object(U.a)(n.projects);return s.splice(a,0,s.splice(r,1)[0]),Object(h.a)(Object(h.a)({},n),{},{projects:s});case"user/created":return(n=t.payload).flag="EMAIL_CONFIRMATION",n;case"user/loggedIn":return(n=t.payload).flag="LOGGED_IN",n;case"user/failedLogin":return n={flag:"FAILED_LOGIN"};case"user/loggedOut":return n={flag:"LOGGED_OUT"};case"user/deleted":return n={flag:"DELETED"};case"project/created":return n.projects=n.projects.concat(t.payload.id),n;case"project/deleted":return n.projects=n.projects.filter((function(e){return e!==t.payload.id})),n;default:return e}},project:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0,n=Object(h.a)({},e);switch(t.type){case"project/created":return(n=t.payload).stages=[],n;case"project/loaded":return n=t.payload;case"project/unloaded":case"user/loggedOut":return F;case"project/deleted":return console.log(t.payload.id),t.payload.id===n.id?F:n;case"stage/created":return console.log(t.payload),n.stages=n.stages.concat(t.payload),n;case"stage/updated":console.log(t.payload);var c=t.payload.stage.id,r=n.stages.findIndex((function(e){return e.id===c}));return n.stages[r]=t.payload.stage,n;case"stage/deleted":return n.stages=n.stages.filter((function(e){return e.id!==t.payload.id})),n;case"task/created":console.log(t.payload);var a=t.payload.stageId,s=n.stages.findIndex((function(e){return e.id===a})),o=t.payload.task;return n.stages[s].tasks=n.stages[s].tasks.concat(o),n;case"task/deleted":console.log(t.payload);var i=n.stages.findIndex((function(e){return e.id===t.payload.stageId}));return n.stages[i].tasks=n.stages[i].tasks.filter((function(e){return e.id!==t.payload.id})),n;default:return e}}}),_=V;n(144);s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(o.a,{store:Object(u.createStore)(_),children:Object(d.jsx)(i.a,{children:Object(d.jsx)(l.d,{children:Object(d.jsxs)(l.b,{path:"/",element:Object(d.jsx)(j,{}),children:[Object(d.jsx)(l.b,{index:!0,element:Object(d.jsx)(g,{})}),Object(d.jsx)(l.b,{path:"signup",element:Object(d.jsx)(z,{})}),Object(d.jsx)(l.b,{path:"login",element:Object(d.jsx)(x,{})}),Object(d.jsx)(l.b,{path:"logout",element:Object(d.jsx)(m,{})}),Object(d.jsx)(l.b,{path:"user/:userId",element:Object(d.jsx)(R,{})}),Object(d.jsx)(l.b,{path:"project/:projectId",element:Object(d.jsx)(A,{})}),Object(d.jsx)(l.b,{path:"unsavedproject",element:Object(d.jsx)(J,{})}),Object(d.jsx)(l.b,{path:"*",element:Object(d.jsx)(g,{})})]})})})})}),document.getElementById("root")),M()},62:function(e,t,n){},63:function(e,t,n){}},[[145,1,2]]]);
//# sourceMappingURL=main.4c27d28f.chunk.js.map