(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),s=n(11),a=n.n(s),o=n(2),i=n(9),u=n(3),j=n(12),l=(n(27),n(28),n(0));function d(){var e=Object(u.g)(),t=Object(o.c)(),n=Object(o.d)((function(e){return e.user}),o.b);return n.id?Object(l.jsxs)("div",{id:"user-tab",children:[Object(l.jsx)("button",{id:"btn-user",onClick:function(c){c.preventDefault(),t({type:"project/unloaded"}),e("user/".concat(n.id))},children:n.name||"Anonymous User"}),Object(l.jsx)(i.b,{to:"logout",id:"btn-logout",children:"Log Out"})]}):Object(l.jsx)("div",{id:"user-tab",children:Object(l.jsx)(i.b,{to:"login",id:"btn-login",children:"Log In"})})}function b(){var e=Object(o.d)((function(e){return e.project.id}));return Object(l.jsxs)("header",{id:"header",children:[Object(l.jsx)("h1",{id:"app-title",children:e||"Taskflow"}),Object(l.jsx)(d,{}),!e&&Object(l.jsx)("h2",{id:"app-subtitle",children:"Collaborative Project Management"})]})}function p(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(b,{}),Object(l.jsx)(u.a,{})]})}var O=n(4),h=n.n(O),f=n(7),x=n(5),g="localhost"===window.location.hostname?"http://localhost:5000":"https://taskflow.herokuapp.com";function m(){var e=Object(o.c)(),t=Object(u.g)(),n=Object(o.d)((function(e){return e.user}),o.b);function r(){return(r=Object(x.a)(h.a.mark((function t(n){var c,r,s,a,o,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c=document.getElementById("user-email"),r=document.getElementById("user-password"),s={method:"POST",cache:"no-store",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c.value,password:r.value})},t.next=6,fetch("".concat(g,"/api/users/login"),s);case 6:if(!(a=t.sent).ok){t.next=15;break}return t.next=10,a.json();case 10:o=t.sent,console.log(o),e({type:"user/loggedIn",payload:Object(f.a)(Object(f.a)({},o.user),{},{token:o.token})}),t.next=20;break;case 15:return t.next=17,a.json();case 17:i=t.sent,console.log(i.message||a),e({type:"user/failedLogin"});case 20:c.value="",r.value="";case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){n.id&&setTimeout((function(){t("../user/".concat(n.id))}),1500)}),[n.id,t]),n.id?Object(l.jsx)("h1",{children:"You are logged in and will be redirected"}):Object(l.jsxs)("div",{children:["Log In:",Object(l.jsxs)("form",{onSubmit:function(e){return r.apply(this,arguments)},children:[Object(l.jsx)("span",{children:"Email: "}),Object(l.jsx)("input",{id:"user-email",type:"text"}),Object(l.jsx)("br",{}),Object(l.jsx)("span",{children:"Password: "}),Object(l.jsx)("input",{id:"user-password",type:"text"}),Object(l.jsx)("button",{type:"submit",children:"Log In"})]})]})}function y(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("main",{id:"home-page",children:[Object(l.jsx)("h2",{children:Object(l.jsx)(i.b,{to:"/signup",children:"Sign Up"})}),Object(l.jsx)("h3",{children:"or"}),Object(l.jsx)("h2",{children:Object(l.jsx)("button",{onClick:function(e){return e.preventDefault(),window.alert("This feature is unavailable yet."),null},children:"Start a new project"})})]})})}function v(){var e=Object(u.g)(),t=Object(o.c)(),n=Object(o.d)((function(e){return e.user.token}),o.b);return Object(c.useEffect)((function(){Object(x.a)(h.a.mark((function e(){var t,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",cache:"no-store",headers:{Authorization:"Bearer ".concat(n)}},console.log(t),e.next=4,fetch("".concat(g,"/api/users/logout"),t);case 4:c=e.sent,console.log(c);case 6:case"end":return e.stop()}}),e)})))(),t({type:"user/loggedOut"}),setTimeout((function(){e("/")}),1500)}),[n,e,t]),Object(l.jsx)("h2",{children:"You have been logged out and will be redirected"})}function k(){var e=Object(o.d)((function(e){return e.user.id})),t=Object(u.g)();Object(c.useEffect)((function(){e||t("/")}),[e,t])}n(31);function w(e){return Object(l.jsxs)("nav",{id:"navbar",children:[Object(l.jsx)("button",{children:"Project"}),Object(l.jsx)("button",{children:"Stages"}),Object(l.jsx)("button",{children:"Tasks"}),Object(l.jsx)("button",{children:"Team"})]})}n(32);function I(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.user.projects}),o.b),n=Object(u.g)(),c=Object(o.d)((function(e){return e.user}),o.b);function r(){return(r=Object(x.a)(h.a.mark((function t(n){var r,s,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r={method:"POST",headers:{Authorization:"Bearer ".concat(c.token),"Content-Type":"application/json"},body:JSON.stringify({title:"".concat(document.getElementById("new-project-title").value)})},t.next=4,fetch("".concat(g,"/api/projects/"),r);case 4:if(!(s=t.sent).ok){t.next=13;break}return t.next=8,s.json();case 8:a=t.sent,console.log(a),e({type:"project/created",payload:a}),t.next=14;break;case 13:console.log(s.status);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=Object(x.a)(h.a.mark((function t(n){var r,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"DELETE",headers:{Authorization:"Bearer ".concat(c.token),"Content-Type":"application/json"}},t.next=3,fetch("".concat(g,"/api/projects/").concat(n),r);case 3:(s=t.sent).ok?e({type:"project/deleted",payload:{id:n}}):console.log(s.status);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function a(){return(a=Object(x.a)(h.a.mark((function t(r){var s,a,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={method:"GET",headers:{Authorization:"Bearer ".concat(c.token),"Content-Type":"application/json"}},t.next=3,fetch("".concat(g,"/api/projects/").concat(r),s);case 3:if(!(a=t.sent).ok){t.next=11;break}return t.next=7,a.json();case 7:o=t.sent,console.log(o),e({type:"project/loaded",payload:{id:r,stages:o}}),n("../project/".concat(r));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var i=t?t.map((function(e){return Object(l.jsxs)("li",{children:[e,Object(l.jsx)("button",{onClick:function(){return function(e){return a.apply(this,arguments)}(e)},children:"Edit"}),Object(l.jsx)("button",{onClick:function(){return function(e){return s.apply(this,arguments)}(e)},children:"Delete"})]},e)})):null;return Object(l.jsxs)("div",{id:"projects-menu",children:[t&&Object(l.jsx)("ul",{id:"projects-list",children:i}),Object(l.jsx)("hr",{}),Object(l.jsxs)("form",{id:"new-project-creator",onSubmit:function(e){return r.apply(this,arguments)},children:[Object(l.jsx)("h3",{children:"Create a new project"}),Object(l.jsx)("h3",{children:"Titled:"}),Object(l.jsx)("textarea",{id:"new-project-title"}),Object(l.jsx)("button",{id:"submit",children:"Create Project"})]})]})}var N=n(10);function T(e){var t=e.projectId,n=Object(c.useState)(!1),r=Object(N.a)(n,2),s=(r[0],r[1]),a=Object(o.d)((function(e){return e.user}),o.b),i=Object(o.c)();function u(){return(u=Object(x.a)(h.a.mark((function e(n){var c,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c={method:"POST",headers:{Authorization:"Bearer ".concat(a.token),"Content-Type":"application/json"},body:JSON.stringify({title:"".concat(document.getElementById("new-stage-title").value)})},e.next=4,fetch("".concat(g,"/api/projects/").concat(t,"/stages"),c);case 4:if(!(r=e.sent).ok){e.next=13;break}return e.next=8,r.json();case 8:s=e.sent,console.log(s),i({type:"stage/created",payload:s}),e.next=14;break;case 13:console.log(r);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.jsxs)(l.Fragment,{children:["Create Stage:",Object(l.jsxs)("form",{onSubmit:function(e){return u.apply(this,arguments)},children:[Object(l.jsx)("input",{id:"new-stage-title"}),Object(l.jsx)("button",{className:"btn-toggle-stage-creator",onClick:function(){return s(!1)},children:"Cancel"}),Object(l.jsx)("button",{className:"btn-create-stage",type:"submit",children:"Create Stage"})]})]})}n(33),n(34);function C(e){var t=e.projectId,n=e.stageId,r=(e.stageIndex,Object(c.useState)(!1)),s=Object(N.a)(r,2),a=s[0],i=s[1],u=Object(o.d)((function(e){return e.user}),o.b),j=Object(o.c)();function d(){return(d=Object(x.a)(h.a.mark((function e(c){var r,s,a,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),r=c.target.querySelector(".new-task-title"),s={method:"POST",headers:{Authorization:"Bearer ".concat(u.token),"Content-Type":"application/json"},body:JSON.stringify({title:"".concat(r.value)})},e.next=5,fetch("".concat(g,"/api/projects/").concat(t,"/stages/").concat(n,"/tasks"),s);case 5:if(!(a=e.sent).ok){e.next=15;break}return e.next=9,a.json();case 9:o=e.sent,console.log(o),j({type:"task/created",payload:{task:Object(f.a)({},o),stageId:n}}),r.value="",e.next=16;break;case 15:console.log(a);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a?Object(l.jsx)("div",{className:"task-creator",children:Object(l.jsxs)("form",{onSubmit:function(e){return d.apply(this,arguments)},children:[Object(l.jsx)("input",{className:"new-task-title"}),Object(l.jsx)("button",{className:"btn-close-task-creator",onClick:function(){return i(!1)},children:"Cancel"}),Object(l.jsx)("button",{className:"btn-create-task",type:"submit",children:"Create Task"})]})}):Object(l.jsx)("div",{className:"task-creator",children:Object(l.jsx)("button",{className:"btn-open-task-creator",onClick:function(){return i(!0)},children:"New Task"})})}n(35);function E(){return null}function S(e){var t=e.stageId,n=e.stageIndex;e.projectId;console.log(t);var c=Object(o.d)((function(e){return e.project.stages[n].tasks}),o.b);console.log(c);Object(o.d)((function(e){return e.user}),o.b),Object(o.c)();function r(){return(r=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var s=c?c.map((function(e){return Object(l.jsxs)("section",{className:"task",children:[Object(l.jsxs)("div",{className:"task-header",children:[Object(l.jsx)("h3",{className:"task-title",children:e.title}),Object(l.jsx)("button",{className:"btn-task-settings",children:"\u2699\ufe0f"}),Object(l.jsx)("button",{className:"btn-task-delete",onClick:function(){return function(e){return r.apply(this,arguments)}(e.id)},children:"\u274c"})]}),Object(l.jsx)(E,{})]},e.id)})):Object(l.jsx)("li",{children:"No tasks yet"});return Object(l.jsx)("div",{id:"task-list",children:s})}function L(){var e=Object(o.d)((function(e){return e.project.id})),t=Object(o.d)((function(e){return e.project.stages}),o.b),n=Object(o.d)((function(e){return e.user}),o.b),c=Object(o.c)();function r(){return(r=Object(x.a)(h.a.mark((function t(r){var s,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={method:"DELETE",headers:{Authorization:"Bearer ".concat(n.token)}},t.next=3,fetch("".concat(g,"/api/projects/").concat(e,"/stages/").concat(r),s);case 3:(a=t.sent).ok?c({type:"stage/deleted",payload:{id:r}}):console.log(a.status);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var s=t?t.map((function(t,n){return Object(l.jsxs)("section",{className:"stage",children:[Object(l.jsxs)("div",{className:"stage-header",children:[Object(l.jsx)("button",{className:"btn-stage-settings",children:"\u2699\ufe0f"}),Object(l.jsx)("h3",{className:"stage-title",children:t.title}),Object(l.jsx)("button",{className:"btn-stage-delete",onClick:function(){return function(e){return r.apply(this,arguments)}(t.id)},children:"X"})]}),Object(l.jsx)("hr",{}),!!t.tasks.length&&Object(l.jsx)(S,{stageId:t.id,stageIndex:n}),Object(l.jsx)(C,{projectId:e,stageId:t.id,stageIndex:n})]},t.id)})):Object(l.jsx)("li",{children:"No stages yet"});return Object(l.jsx)("div",{id:"stages-panel",children:t&&s})}function B(){var e=Object(o.d)((function(e){return e.project.id}));return k(),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(w,{}),Object(l.jsxs)("main",{id:"project-panel",children:[e?Object(l.jsx)(L,{}):Object(l.jsx)(I,{}),Object(l.jsx)("hr",{}),Object(l.jsx)(T,{projectId:e})]})]})}function D(){var e=Object(o.c)();function t(){return(t=Object(x.a)(h.a.mark((function t(n){var c,r,s,a,o,i,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c=document.getElementById("user-name"),r=document.getElementById("user-email"),s=document.getElementById("user-password"),a={method:"POST",cache:"no-store",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c.value,email:r.value,password:s.value})},console.log(a),t.next=8,fetch("".concat(g,"/api/users"),a);case 8:if(!(o=t.sent).ok){t.next=17;break}return t.next=12,o.json();case 12:i=t.sent,console.log(i),e({type:"user/created",payload:Object(f.a)(Object(f.a)({},i.user),{},{token:i.token})}),t.next=22;break;case 17:return t.next=19,o.json();case 19:u=t.sent,console.log(u.message||o),e({type:"user/failedLogin"});case 22:c.value="",r.value="",s.value="";case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(o.d)((function(e){return e.user}),o.b).id?Object(l.jsx)("h1",{children:"User is logged in"}):Object(l.jsxs)("main",{id:"signup-page",children:["Sign Up:",Object(l.jsxs)("form",{onSubmit:function(e){return t.apply(this,arguments)},children:[Object(l.jsx)("span",{children:"User Name: "}),Object(l.jsx)("input",{id:"user-name",type:"text"}),Object(l.jsx)("br",{}),Object(l.jsx)("span",{children:"Email: "}),Object(l.jsx)("input",{id:"user-email",type:"text"}),Object(l.jsx)("br",{}),Object(l.jsx)("span",{children:"Password: "}),Object(l.jsx)("input",{id:"user-password",type:"text"}),Object(l.jsx)("button",{type:"submit",children:"Sign Up"})]})]})}function P(){return Object(l.jsx)("h1",{children:"Unsaved Project"})}function A(){return k(),Object(l.jsx)(I,{})}var F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))},U={id:null,title:"",stages:[]};var z={};var J=Object(j.a)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0,n=Object(f.a)({},e);switch(t.type){case"user/created":return(n=t.payload).flag="EMAIL_CONFIRMATION",n;case"user/loggedIn":return(n=t.payload).flag="LOGGED_IN",n;case"user/failedLogin":return n={flag:"FAILED_LOGIN"};case"user/loggedOut":return n={flag:"LOGGED_OUT"};case"user/deleted":return n={flag:"DELETED"};case"project/created":return n.projects=n.projects.concat(t.payload.id),n;case"project/deleted":return n.projects=n.projects.filter((function(e){return e!==t.payload.id})),n;default:return e}},project:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,n=Object(f.a)({},e);switch(t.type){case"project/created":return(n=t.payload).stages=[],n;case"project/loaded":return n=t.payload;case"project/unloaded":case"user/loggedOut":return U;case"project/deleted":return console.log(t.payload.id),t.payload.id===n.id?U:n;case"stage/created":return console.log(t.payload),n.stages=n.stages.concat(t.payload),n;case"stage/deleted":case"task/deleted":return n.stages=n.stages.filter((function(e){return e.id!==t.payload.id})),n;case"task/created":console.log(t.payload);var c=t.payload.stageId,r=n.stages.findIndex((function(e){return e.id===c})),s=t.payload.task;return n.stages[r].tasks=n.stages[r].tasks.concat(s),n;default:return e}}}),G=J;n(36);a.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(o.a,{store:Object(j.b)(G),children:Object(l.jsx)(i.a,{children:Object(l.jsx)(u.d,{children:Object(l.jsxs)(u.b,{path:"/",element:Object(l.jsx)(p,{}),children:[Object(l.jsx)(u.b,{index:!0,element:Object(l.jsx)(y,{})}),Object(l.jsx)(u.b,{path:"signup",element:Object(l.jsx)(D,{})}),Object(l.jsx)(u.b,{path:"login",element:Object(l.jsx)(m,{})}),Object(l.jsx)(u.b,{path:"logout",element:Object(l.jsx)(v,{})}),Object(l.jsx)(u.b,{path:"user/:userId",element:Object(l.jsx)(A,{})}),Object(l.jsx)(u.b,{path:"project/:projectId",element:Object(l.jsx)(B,{})}),Object(l.jsx)(u.b,{path:"unsavedproject",element:Object(l.jsx)(P,{})}),Object(l.jsx)(u.b,{path:"*",element:Object(l.jsx)(y,{})})]})})})})}),document.getElementById("root")),F()}},[[37,1,2]]]);
//# sourceMappingURL=main.e9be0c99.chunk.js.map