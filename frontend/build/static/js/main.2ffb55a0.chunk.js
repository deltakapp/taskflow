(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),s=n(26),a=n.n(s),o=n(2),i=n(7),u=n(4),l=n(22),j=n(3),d=n.n(j),b=n(6),p="localhost"===window.location.hostname?"http://localhost:5000":"https://taskflow.herokuapp.com",h=n(0);function O(){var e=Object(o.c)(),t=Object(u.h)(),n=Object(o.d)((function(e){return e.user}),o.b);function r(){return(r=Object(b.a)(d.a.mark((function t(n){var c,r,s,a,o,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c=document.getElementById("user-email"),r=document.getElementById("user-password"),s={method:"POST",cache:"no-store",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c.value,password:r.value})},t.next=6,fetch("".concat(p,"/api/users/login"),s);case 6:if(!(a=t.sent).ok){t.next=14;break}return t.next=10,a.json();case 10:o=t.sent,e({type:"user/loggedIn",payload:o.user,token:o.token}),t.next=19;break;case 14:return t.next=16,a.json();case 16:i=t.sent,console.log(i.message||a),alert("User credentials do not match");case 19:c.value="",r.value="";case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){console.log("homepage effect"),n.id&&setTimeout((function(){t("../user/".concat(n.id))}),1500)}),[n.id,t]),Object(h.jsxs)("main",{className:"single",children:[Object(h.jsx)("img",{className:"logo",alt:"Taskflow.tech",src:"/logo.png"}),Object(h.jsx)("h1",{children:Object(h.jsx)("a",{href:"/",children:"Taskflow.tech"})}),Object(h.jsx)("h2",{children:"Login"}),Object(h.jsxs)("form",{onSubmit:function(e){return r.apply(this,arguments)},children:[Object(h.jsx)("input",{id:"user-email",type:"text",placeholder:"E-mail"}),Object(h.jsx)("input",{id:"user-password",type:"password",placeholder:"Password"}),Object(h.jsx)("button",{type:"submit",children:"Log In"})]}),Object(h.jsx)("h3",{children:Object(h.jsx)(i.b,{to:"/signup",children:"Sign Up"})})]})}function f(){var e=Object(u.h)();return Object(c.useEffect)((function(){setTimeout((function(){e("/")}),1500)}),[e]),Object(h.jsxs)("main",{className:"single",children:[Object(h.jsx)("img",{className:"logo",alt:"Taskflow.tech",src:"/logo.png"}),Object(h.jsx)("h1",{children:Object(h.jsx)("a",{href:"/",children:"Taskflow.tech"})}),Object(h.jsx)("h2",{children:"You have been logged out and will be redirected."})]})}var x=n(15),g=n(51),m=n(28),k=n(5);n(64);function v(e,t,n){var c={method:e,headers:{Authorization:t,cache:"no-store"}};return n&&(c.headers["Content-Type"]="application/json",c.body=JSON.stringify(n)),c}var y="projectTab",w="stage";function I(e){var t=e.index,n=e.title,r=e.projectId,s=e.reorderProjects,a=e.loadProject,o=Object(c.useRef)(null),i=Object(x.useDrop)({accept:y,hover:function(e,n){var c;if(o.current){var r=e.index,a=t;if(r!==a){var i=null===(c=o.current)||void 0===c?void 0:c.getBoundingClientRect(),u=(i.right-i.left)/2,l=n.getClientOffset().x-i.left;r<a&&l<u||r>a&&l>u||(s(r,a),e.index=a)}}}}),u=Object(k.a)(i,2)[1],l=Object(x.useDrag)({type:y,item:function(){return{title:n,index:t}},collect:function(e){return{isDragging:e.isDragging()}}}),j=Object(k.a)(l,2),d=j[0].isDragging?0:1;return(0,j[1])(u(o)),Object(h.jsx)("li",{ref:o,style:{opacity:d},children:Object(h.jsx)("button",{className:"btn",onClick:function(){return a(r)},children:n})})}function C(){var e=Object(c.useState)(!1),t=Object(k.a)(e,2),n=t[0],r=t[1],s=Object(o.d)((function(e){return e.user.projects}),o.b),a=Object(o.c)(),i=Object(u.h)(),l=Object(o.d)((function(e){return e.token})),j=Object(c.useCallback)(function(){var e=Object(b.a)(d.a.mark((function e(t){var n,c,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=v("POST",l,{title:"".concat(document.getElementById("new-project-title").value)}),e.next=4,fetch("".concat(p,"/api/projects/"),n);case 4:if(!(c=e.sent).ok){e.next=15;break}return s=c.headers.get("X-Auth-Token"),e.next=9,c.json();case 9:o=e.sent,console.log(c),a({type:"project/created",payload:o.project,token:s}),r(!1),e.next=16;break;case 15:console.error(c.status);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,a]),O=Object(c.useCallback)(function(){var e=Object(b.a)(d.a.mark((function e(t){var n,c,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v("GET",l),e.next=3,fetch("".concat(p,"/api/projects/").concat(t),n);case 3:if(!(c=e.sent).ok){e.next=14;break}return r=c.headers.get("X-Auth-Token"),e.next=8,c.json();case 8:s=e.sent,console.log(c),a({type:"project/loaded",payload:s.project,token:r}),i("../project/".concat(t)),e.next=15;break;case 14:console.error(c.status);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,a,i]),f=Object(c.useCallback)(function(){var e=Object(b.a)(d.a.mark((function e(t,n){var c,r,o,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:return(c=Object(m.a)(s)).splice(n,0,c.splice(t,1)[0]),console.log(c),a({type:"user/reorderProjects",payload:c}),r=v("PATCH",l,{projects:c.map((function(e){return e.projectId}))}),e.next=9,fetch("".concat(p,"/api/users/"),r);case 9:(o=e.sent).ok?(i=o.headers.get("X-Auth-Token"))&&a({type:"token/refresh",token:i}):console.error(o);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[s,l,a]),x=Object(c.useCallback)((function(e,t,n){return Object(h.jsx)(I,{index:e,title:t,projectId:n,reorderProjects:f,loadProject:O},n)}),[f,O]),g=n?Object(h.jsx)("div",{className:"overlay",children:Object(h.jsx)("div",{className:"overlay-inner",children:Object(h.jsxs)("form",{id:"new-project-creator",onSubmit:j,children:[Object(h.jsx)("label",{htmlFor:"new-project-title",children:"New Project:"}),Object(h.jsx)("input",{id:"new-project-title"}),Object(h.jsxs)("div",{className:"two-button mt-2",children:[Object(h.jsx)("button",{id:"submit",children:"Create Project"}),Object(h.jsx)("button",{className:"btn-close-task-creator ml-1",onClick:function(){return r(!1)},type:"button",children:"Cancel"})]})]})})}):Object(h.jsx)("li",{className:"add-project",children:Object(h.jsx)("button",{onClick:function(){return r(!0)},title:"Add new project",children:Object(h.jsx)("svg",{height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16","data-view-component":"true",children:Object(h.jsx)("path",{fillRule:"evenodd",d:"M7.75 2a.75.75 0 01.75.75V7h4.25a.75.75 0 110 1.5H8.5v4.25a.75.75 0 11-1.5 0V8.5H2.75a.75.75 0 010-1.5H7V2.75A.75.75 0 017.75 2z"})})})});return Object(h.jsxs)("nav",{id:"navbar",children:[Object(h.jsxs)("ul",{className:"tabrow",children:[null===s||void 0===s?void 0:s.map((function(e,t){return x(t,e.title,e.projectId)})),g]}),Object(h.jsx)("br",{})]})}n(127),n(128);function N(){var e=Object(u.h)(),t=Object(o.c)(),n=Object(o.d)((function(e){return e.user}),o.b),c=Object(o.d)((function(e){return e.token}));function r(){return(r=Object(b.a)(d.a.mark((function e(){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("logging out user"),n=v("POST",c),e.next=4,fetch("".concat(p,"/api/users/logout"),n);case 4:r=e.sent,console.log(n),console.log(r),setTimeout((function(){t({type:"user/loggedOut"})}),500);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n.id?Object(h.jsxs)("div",{id:"user-tab",children:[Object(h.jsx)("button",{id:"btn-user-name",onClick:function(c){c.preventDefault(),t({type:"project/unloaded"}),e("/user/".concat(n.id))},children:n.name||"Anonymous User"}),Object(h.jsxs)("div",{id:"user-panel",children:[Object(h.jsx)("button",{onClick:function(){return e("/user/".concat(n.id,"/settings"))},children:"Settings"}),Object(h.jsx)("button",{onClick:function(){return e("/user/".concat(n.id,"/projects"))},children:"My Projects"}),Object(h.jsx)("button",{onClick:function(){return function(){return r.apply(this,arguments)}()},id:"btn-logout",children:"Log Out"})]})]}):Object(h.jsx)("div",{id:"user-tab",children:Object(h.jsx)(i.b,{to:"login",id:"btn-login",children:"Log In"})})}function S(){return function(){var e=Object(o.d)((function(e){return e.token})),t=Object(u.h)();Object(c.useEffect)((function(){e||t("../logout")}),[e,t])}(),Object(h.jsxs)("header",{id:"page-header",children:[Object(h.jsx)("div",{id:"app-title",children:Object(h.jsx)("img",{className:"logo",alt:"logo",src:"/logo-smol.png"})}),Object(h.jsx)(N,{})]})}n(129),n(130),n(131);function T(e){var t=e.stageId,n=Object(c.useState)(!1),r=Object(k.a)(n,2),s=r[0],a=r[1],i=Object(c.useState)(""),u=Object(k.a)(i,2),l=u[0],j=u[1],O=Object(o.d)((function(e){return e.token})),f=Object(o.c)();function x(){return(x=Object(b.a)(d.a.mark((function e(n){var c,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c=v("PATCH",O,{title:l}),e.next=4,fetch("".concat(p,"/api/stages/").concat(t),c);case 4:if(!(r=e.sent).ok){e.next=14;break}return a(!1),e.next=9,r.json();case 9:s=e.sent,console.log(s),f({type:"stage/updated",payload:s}),e.next=15;break;case 14:console.log(r.status);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return s?Object(h.jsx)("div",{className:"overlay",children:Object(h.jsx)("div",{className:"overlay-inner",children:Object(h.jsxs)("form",{className:"stage-rename",onSubmit:function(e){return x.apply(this,arguments)},children:[Object(h.jsx)("label",{htmlFor:"rename",children:"Rename Stage:"}),Object(h.jsx)("input",{type:"text",className:"rename",maxLength:"30",value:l,onChange:function(e){return j(e.target.value)}}),Object(h.jsxs)("div",{className:"two-button mt-2",children:[Object(h.jsx)("button",{className:"btn-stage-rename mr-1",type:"submit",children:"Rename"}),Object(h.jsx)("button",{className:"btn-close-stage-rename ml-1",onClick:function(){return a(!1)},type:"button",children:"Cancel"})]})]})})}):Object(h.jsx)("button",{className:"btn",onClick:function(){return a(!0)},children:"Rename Stage"})}n(132);function E(e){var t=e.taskId,n=e.taskIndex,r=e.stageId,s=e.stageIndex;console.log("rendering task");var a=Object(o.d)((function(e){return e.project.stages[s].tasks[n]})),i=Object(o.d)((function(e){return e.token})),u=Object(o.c)(),l=Object(c.useState)(!1),j=Object(k.a)(l,2),O=j[0],f=j[1],x=Object(c.useState)(a.title),g=Object(k.a)(x,2),m=g[0],y=g[1],w=Object(c.useState)(a.details),I=Object(k.a)(w,2),C=I[0],N=I[1];function S(){return(S=Object(b.a)(d.a.mark((function e(){var n,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v("PATCH",i,{title:m,details:C}),e.next=3,fetch("".concat(p,"/api/stages/").concat(r,"/tasks/").concat(t),n);case 3:if(!(c=e.sent).ok){e.next=12;break}return e.next=7,c.json();case 7:s=e.sent,u({type:"task/updated",payload:{stageId:r,task:s}}),f(!1),e.next=13;break;case 12:console.log(c.status);case 13:f(!1);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return E.apply(this,arguments)}function E(){return(E=Object(b.a)(d.a.mark((function e(){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v("DELETE",i),e.next=3,fetch("".concat(p,"/api/stages/").concat(r,"/tasks/").concat(t),n);case 3:(c=e.sent).ok?(console.log(c),u({type:"task/deleted",payload:{stageId:r,taskId:t}})):console.log(c.status);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=O?Object(h.jsxs)("div",{className:"task-title-bar",children:[Object(h.jsx)("input",{type:"text",className:"task-title-editor",placeholder:a.title,onChange:function(e){return y(e.target.value)}}),Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{className:"btn-cancel-edit-task",onClick:function(){y(a.title),N(a.details),f(!1)},children:"\ud83d\udeab"}),Object(h.jsx)("button",{className:"btn-save-task",onClick:function(){return S.apply(this,arguments)},children:"\ud83d\udcbe"})]})]}):Object(h.jsxs)("div",{className:"task-title-bar",children:[Object(h.jsx)("p",{className:"task-title",children:a.title}),Object(h.jsx)("button",{className:"btn-edit-task",onClick:function(){return f(!0)},children:"\u270f\ufe0f"})]}),D=O?Object(h.jsx)("textarea",{className:"task-details",name:"task-details",rows:"4",value:C,onChange:function(e){return N(e.target.value)}}):Object(h.jsxs)("form",{children:[a.details&&Object(h.jsx)("hr",{}),Object(h.jsx)("p",{className:"task-details",children:a.details})]}),A=O&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{className:"task-options",children:[Object(h.jsx)("button",{className:"btn-delete-task",onClick:function(){return T()},children:"\ud83d\uddd1\ufe0f Delete Task"}),Object(h.jsx)("button",{className:"btn-complete-task",onClick:function(){return T()},children:"\u2714\ufe0f Mark Complete"})]})]});return Object(h.jsxs)("div",{className:"task-card",children:[P,D,A]})}function P(e){var t=e.stageId,n=Object(c.useState)(!1),r=Object(k.a)(n,2),s=r[0],a=r[1],i=Object(c.useState)(""),u=Object(k.a)(i,2),l=u[0],j=u[1],O=Object(c.useState)(""),f=Object(k.a)(O,2),x=f[0],g=f[1],m=Object(o.d)((function(e){return e.token})),y=Object(o.c)();function w(){return(w=Object(b.a)(d.a.mark((function e(n){var c,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c=v("POST",m,{title:l,details:x}),e.next=4,fetch("".concat(p,"/api/stages/").concat(t,"/tasks"),c);case 4:if(!(r=e.sent).ok){e.next=16;break}return e.next=8,r.json();case 8:s=e.sent,console.log(s),y({type:"task/created",payload:{task:s,stageId:t}}),a(!1),j(""),g(""),e.next=17;break;case 16:console.log(r);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return s?Object(h.jsx)("div",{className:"task-creator",children:Object(h.jsxs)("form",{onSubmit:function(e){return w.apply(this,arguments)},children:[Object(h.jsx)("textarea",{className:"new-task-title",placeholder:"Enter a task",maxLength:"31",value:l,onChange:function(e){return j(e.target.value)}}),Object(h.jsx)("textarea",{className:"new-task-details",placeholder:"Enter details (optional)",maxLength:"500",value:x,onChange:function(e){return g(e.target.value)}}),Object(h.jsxs)("div",{className:"two-button mt-2",children:[Object(h.jsx)("button",{className:"btn-create-task mr-1",type:"submit",children:"Create Task"}),Object(h.jsx)("button",{className:"btn-close-task-creator ml-1",onClick:function(){return a(!1)},type:"button",children:"Cancel"})]})]})}):Object(h.jsx)("div",{className:"task-creator float-right",children:Object(h.jsx)("button",{className:"btn-open-task-creator",onClick:function(){return a(!0)},children:Object(h.jsx)("svg",{height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16","data-view-component":"true",className:"mr-2",children:Object(h.jsx)("path",{fillRule:"evenodd",d:"M7.75 2a.75.75 0 01.75.75V7h4.25a.75.75 0 110 1.5H8.5v4.25a.75.75 0 11-1.5 0V8.5H2.75a.75.75 0 010-1.5H7V2.75A.75.75 0 017.75 2z"})})})})}function D(e){var t=e.stageId,n=e.stageIndex,r=e.title,s=e.reorderStages;console.log("Rendering stage ".concat(r));var a=Object(o.d)((function(e){return e.project.stages[n]})),i=Object(o.d)((function(e){return e.project.stages[n].tasks}),o.b),u=Object(o.d)((function(e){return e.token})),l=Object(o.c)(),j=Object(c.useRef)(null),O=Object(x.useDrop)({accept:w,hover:function(e,t){var c;if(j.current){var r=e.index,a=n;if(r!==a){var o=null===(c=j.current)||void 0===c?void 0:c.getBoundingClientRect(),i=(o.right-o.left)/2,u=t.getClientOffset().x-o.left;r<a&&u<i||r>a&&u>i||(s(r,a),e.index=a)}}}}),f=Object(k.a)(O,2)[1],g=Object(x.useDrag)({type:w,item:function(){return{title:r,stageIndex:n}},collect:function(e){return{isDragging:e.isDragging()}}}),m=Object(k.a)(g,2);m[0].isDragging;function y(){return y=Object(b.a)(d.a.mark((function e(t){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v("DELETE",u),e.next=3,fetch("".concat(p,"/api/stages/").concat(t),n);case 3:(c=e.sent).ok?l({type:"stage/deleted",payload:{stageId:t}}):console.log(c.status);case 5:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}(0,m[1])(f(j));var I=i?i.map((function(e,c){return Object(h.jsx)(E,{taskId:e.taskId,taskIndex:c,stageId:t,stageIndex:n},e.taskId)})):null;return Object(h.jsxs)("section",{className:"stage",ref:j,children:[Object(h.jsx)("div",{className:"stage-header",children:Object(h.jsxs)("details",{className:"dropdown",children:[" ",Object(h.jsxs)("summary",{className:"",role:"button",children:[Object(h.jsx)("h3",{className:"stage-title",children:a.title}),Object(h.jsx)("svg",{height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16","data-view-component":"true",className:"float-right",children:Object(h.jsx)("path",{d:"M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})}),Object(h.jsx)(P,{stageId:t,stageIndex:n})]}),Object(h.jsx)("span",{className:"dropdown-content mt-4",children:Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{children:Object(h.jsx)(T,{stageId:t})}),Object(h.jsx)("li",{children:Object(h.jsx)("button",{className:"btn",onClick:function(){return function(e){return y.apply(this,arguments)}(t)},children:"Delete Stage"})})]})})]})}),I]},t)}function A(e){var t=e.projectId,n=Object(c.useState)(!1),r=Object(k.a)(n,2),s=r[0],a=r[1],i=Object(c.useState)(""),u=Object(k.a)(i,2),l=u[0],j=u[1],O=Object(o.d)((function(e){return e.token})),f=Object(o.c)();function x(){return(x=Object(b.a)(d.a.mark((function e(n){var c,r,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c=v("POST",O,{title:l,projectId:t}),e.next=4,fetch("".concat(p,"/api/stages"),c);case 4:if(!(r=e.sent).ok){e.next=16;break}return s=r.headers.get("X-Auth-Token"),e.next=9,r.json();case 9:o=e.sent,console.log(o),f({type:"stage/created",payload:o,token:s}),a(!1),j(""),e.next=17;break;case 16:console.error(r);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return s?Object(h.jsx)("div",{className:"overlay",children:Object(h.jsx)("div",{className:"overlay-inner",children:Object(h.jsxs)("form",{onSubmit:function(e){return x.apply(this,arguments)},children:[Object(h.jsx)("label",{htmlFor:"new-stage-title",children:"Create Stage:"}),Object(h.jsx)("input",{type:"text",id:"new-stage-title",value:l,maxLength:"29",required:!0,onChange:function(e){return j(e.target.value)}}),Object(h.jsxs)("div",{className:"two-button mt-2",children:[Object(h.jsx)("button",{className:"btn-create-stage",type:"submit",children:"Create Stage"}),Object(h.jsx)("button",{className:"btn-toggle-stage-creator",onClick:function(){return a(!1)},children:"Cancel"})]})]})})}):Object(h.jsx)("section",{className:"stage create",children:Object(h.jsx)("button",{className:"btn",onClick:function(){return a(!0)},children:"Create Stage"})})}function B(){var e=Object(o.d)((function(e){return e.project.projectId})),t=Object(o.d)((function(e){return e.project.stages}),o.b),n=Object(o.d)((function(e){return e.token})),r=Object(o.c)(),s=Object(c.useCallback)(function(){var c=Object(b.a)(d.a.mark((function c(s,a){var o,i,u,l;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(n){c.next=2;break}return c.abrupt("return");case 2:return(o=Object(m.a)(t)).splice(a,0,o.splice(s,1)[0]),console.log(o),r({type:"project/reorderStages",payload:o}),i=v("PATCH",n,{stages:o.map((function(e){return e.stageId}))}),c.next=9,fetch("".concat(p,"/api/projects/").concat(e),i);case 9:(u=c.sent).ok?(l=u.headers.get("X-Auth-Token"))&&r({type:"token/refresh",token:l}):console.error(u);case 11:case"end":return c.stop()}}),c)})));return function(e,t){return c.apply(this,arguments)}}(),[t,n,e,r]),a=null===t||void 0===t?void 0:t.map((function(e,t){return Object(h.jsx)(D,{stageId:e.stageId,stageIndex:t,title:e.title,reorderStages:s},e.stageId)}));return Object(h.jsxs)("div",{id:"project-board",children:[a,Object(h.jsx)(A,{projectId:e})]})}function L(){return Object(h.jsxs)(x.DndProvider,{backend:g.HTML5Backend,children:[Object(h.jsx)(S,{}),Object(h.jsx)(C,{}),Object(h.jsx)("main",{children:Object(h.jsx)(B,{})})]})}function F(){return Object(h.jsx)(u.a,{to:"projects",replace:!0})}function H(){var e=Object(o.c)(),t=(Object(u.h)(),Object(o.d)((function(e){return e.user})));function n(){return(n=Object(b.a)(d.a.mark((function t(n){var c,r,s,a,o,i,u;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c=document.getElementById("user-name"),r=document.getElementById("user-email"),s=document.getElementById("user-password"),a={method:"POST",cache:"no-store",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c.value,email:r.value,password:s.value})},console.log(a),t.next=8,fetch("".concat(p,"/api/users"),a);case 8:if(!(o=t.sent).ok){t.next=17;break}return t.next=12,o.json();case 12:i=t.sent,console.log(i),e({type:"user/created",payload:i.user,token:i.token}),t.next=22;break;case 17:return t.next=19,o.json();case 19:u=t.sent,console.log(u.message||o),e({type:"user/failedLogin"});case 22:c.value="",r.value="",s.value="";case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){var e=Object(o.d)((function(e){return e.user})),t=Object(u.h)();Object(c.useEffect)((function(){e.id&&setTimeout((function(){t("../user/".concat(e.id))}),1500)}),[e.id,t])}(),t.id?Object(h.jsx)("h1",{children:"User is logged in"}):Object(h.jsxs)("main",{className:"single",children:[Object(h.jsx)("img",{className:"logo",alt:"Taskflow.tech",src:"/logo.png"}),Object(h.jsx)("h1",{children:Object(h.jsx)("a",{href:"/",children:"Taskflow.tech"})}),Object(h.jsx)("h2",{children:"Sign Up"}),Object(h.jsxs)("form",{onSubmit:function(e){return n.apply(this,arguments)},children:[Object(h.jsx)("input",{id:"user-name",type:"text",placeholder:"User Name"}),Object(h.jsx)("input",{id:"user-email",type:"text",placeholder:"Email Address"}),Object(h.jsx)("input",{id:"user-password",type:"password",placeholder:"Password"}),Object(h.jsx)("button",{type:"submit",children:"Sign Up"})]}),Object(h.jsx)("h3",{children:Object(h.jsx)(i.b,{to:"/",children:"Log In"})})]})}function R(){return Object(h.jsx)("h1",{children:"Unsaved Project"})}n(49),n(145);function M(){var e=Object(o.d)((function(e){return e.token})),t=Object(c.useState)(!1),n=Object(k.a)(t,2),r=n[0],s=n[1],a=Object(o.c)(),i=Object(u.h)();function l(){return(l=Object(b.a)(d.a.mark((function t(n){var c,r,s,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c=v("POST",e,{title:"".concat(document.getElementById("new-project-title").value)}),t.next=4,fetch("".concat(p,"/api/projects/"),c);case 4:if(!(r=t.sent).ok){t.next=16;break}return s=r.headers.get("X-Auth-Token"),t.next=9,r.json();case 9:return o=t.sent,console.log(o),t.next=13,a({type:"project/created",payload:o.project,token:s});case 13:i("../project/".concat(o.project.projectId)),t.next=17;break;case 16:console.log(r.status);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r?Object(h.jsxs)("form",{id:"new-project-creator",onSubmit:function(e){return l.apply(this,arguments)},children:[Object(h.jsx)("h3",{children:"Start a new project:"}),Object(h.jsx)("input",{id:"new-project-title",placeholder:"Project Title"}),Object(h.jsx)("button",{id:"submit",children:"Create Project"}),Object(h.jsx)("button",{id:"btn-toggle-project-creator",onClick:function(){return s(!1)},children:"Cancel"})]}):Object(h.jsx)("button",{id:"btn-toggle-project-creator",onClick:function(){return s(!0)},children:"Start New Project"})}function U(){var e=Object(o.d)((function(e){return e.user.projects}),o.b),t=Object(o.d)((function(e){return e.token})),n=Object(o.c)(),c=Object(u.h)();function r(){return(r=Object(b.a)(d.a.mark((function e(c){var r,s,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v("DELETE",t),e.next=3,fetch("".concat(p,"/api/projects/").concat(c),r);case 3:(s=e.sent).ok?(a=s.headers.get("X-Auth-Token"),n({type:"project/deleted",payload:{projectId:c},token:a})):console.log(s.status);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=Object(b.a)(d.a.mark((function e(r){var s,a,o,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v("GET",t),e.next=3,fetch("".concat(p,"/api/projects/").concat(r),s);case 3:if(!(a=e.sent).ok){e.next=12;break}return o=a.headers.get("X-Auth-Token"),e.next=8,a.json();case 8:i=e.sent,console.log(i),n({type:"project/loaded",payload:i.project,token:o}),c("../project/".concat(r));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var a=e?e.map((function(e){return Object(h.jsxs)("li",{children:[e.title,Object(h.jsx)("button",{onClick:function(){return function(e){return s.apply(this,arguments)}(e.projectId)},children:"Edit"}),Object(h.jsx)("button",{onClick:function(){return function(e){return r.apply(this,arguments)}(e.projectId)},children:"Delete"})]},e.projectId)})):null;return Object(h.jsxs)("div",{id:"projects-menu",children:[e&&Object(h.jsx)("ul",{id:"projects-list",children:a}),Object(h.jsx)(M,{})]})}function X(){var e=Object(o.d)((function(e){return e.user})),t=Object(u.h)();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S,{}),Object(h.jsxs)("nav",{id:"mode-selector",children:[Object(h.jsx)("button",{children:"My Projects"}),Object(h.jsx)("button",{onClick:function(){return t("/user/".concat(e.id,"/settings"))},children:"Settings"})]}),Object(h.jsx)(U,{})]})}n(27);var z=n(13);function G(){var e=Object(o.d)((function(e){return e.user})),t=Object(o.d)((function(e){return e.token})),n=Object(o.c)();var r=Object(c.useState)(!1),s=Object(k.a)(r,2),a=s[0],i=s[1],u=Object(c.useState)(e.name),l=Object(k.a)(u,2),j=l[0],O=l[1],f=Object(c.useState)(!1),x=Object(k.a)(f,2),g=x[0],m=x[1],y=Object(c.useState)(e.email),w=Object(k.a)(y,2),I=w[0],C=w[1],N=Object(c.useState)(!1),S=Object(k.a)(N,2),T=S[0],E=S[1];function P(e){return D.apply(this,arguments)}function D(){return(D=Object(b.a)(d.a.mark((function e(c){var r,s,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),r=v("PATCH",t,{name:j}),e.next=4,fetch("".concat(p,"/api/users/"),r);case 4:if(!(s=e.sent).ok){e.next=15;break}return e.next=8,s.json();case 8:a=e.sent,console.log(a),i(!1),n({type:"user/patched",payload:a}),alert("Password successfully changed"),e.next=16;break;case 15:console.log(s.status);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return B.apply(this,arguments)}function B(){return(B=Object(b.a)(d.a.mark((function e(c){var r,s,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),r=v("PATCH",t,{email:I}),e.next=4,fetch("".concat(p,"/api/users/"),r);case 4:if(!(s=e.sent).ok){e.next=15;break}return e.next=8,s.json();case 8:a=e.sent,console.log(a),m(!1),n({type:"user/patched",payload:a}),alert("Password successfully changed"),e.next=16;break;case 15:console.log(s.status);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return F.apply(this,arguments)}function F(){return(F=Object(b.a)(d.a.mark((function c(r){var s,a,o,i;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(r.preventDefault(),s=document.getElementById("current-password").value,a=document.getElementById("new-password-1").value,o=document.getElementById("new-password-2").value,a===o){c.next=10;break}alert("New passwords do not match"),console.log(a),console.log(o),c.next=16;break;case 10:return i=v("PATCH",t,{email:e.email,oldPassword:s,newPassword:a}),console.log(i),c.next=14,fetch("".concat(p,"/api/users"),i);case 14:c.sent.ok&&(E(!1),n({type:"user/patched",payload:{},token:t}),alert("Password successfully changed"));case 16:case"end":return c.stop()}}),c)})))).apply(this,arguments)}function H(){return(H=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.getElementById("current-password").value="",document.getElementById("new-password-1").value="",document.getElementById("new-password-2").value="",E(!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{children:"User Name:"}),a?Object(h.jsxs)("form",{onSubmit:P,children:[Object(h.jsx)("input",{type:"text",value:j,onChange:function(e){return O(e.target.value)}}),Object(h.jsx)("button",{type:"submit",onClick:P,children:"Save"}),Object(h.jsx)("button",{type:"button",onClick:function(){i(!1),O(e.name)},children:"Cancel"})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:e.name}),Object(h.jsx)("button",{onClick:function(){return i(!0)},children:"Edit"})]}),Object(h.jsx)("h2",{children:"Email Address:"}),g?Object(h.jsxs)("form",{onSubmit:A,children:[Object(h.jsx)("input",{type:"text",value:I,onChange:function(e){return C(e.target.value)}}),Object(h.jsx)("button",{type:"submit",onClick:A,children:"Save"}),Object(h.jsx)("button",{type:"button",onClick:function(){m(!1),C(e.email)},children:"Cancel"})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:e.email}),Object(h.jsx)("button",{onClick:function(){return m(!0)},children:"Edit"})]}),Object(h.jsx)("h2",{children:"Password"}),T?Object(h.jsxs)("form",{onSubmit:L,children:[Object(h.jsx)("p",{children:"Current password:"}),Object(h.jsx)("input",{id:"current-password",type:"text"}),Object(h.jsx)("p",{children:"Enter new password:"}),Object(h.jsx)("input",{id:"new-password-1",type:"text"}),Object(h.jsx)("p",{children:"Re-enter new password:"}),Object(h.jsx)("input",{id:"new-password-2",type:"text"}),Object(h.jsx)("button",{type:"submit",onClick:L,children:"Save"}),Object(h.jsx)("button",{type:"button",onClick:function(){return function(){return H.apply(this,arguments)}()},children:"Cancel"})]}):Object(h.jsx)("button",{onClick:function(){return E(!0)},children:"Change Password"})]})}function V(){var e=Object(o.d)((function(e){return e.user})),t=Object(u.h)();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S,{}),Object(h.jsxs)("nav",{id:"mode-selector",children:[Object(h.jsx)("button",{onClick:function(){return t("/user/".concat(e.id,"/projects"))},children:"My Projects"}),Object(h.jsx)("button",{children:"User Settings"})]}),Object(h.jsx)(G,{})]})}var J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,149)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))},W={projectId:null,title:"",stages:[]};var _={};var q=Object(l.combineReducers)({project:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0,n=Object(z.a)({},e),c=t.payload;switch((t.type.startsWith("project")||t.type.startsWith("stage")||t.type.startsWith("task"))&&console.log(c),t.type){case"project/reorderStages":return n.stages=c,n;case"project/created":return n.projectId||(n=c),n;case"project/loaded":return n=c;case"project/unloaded":case"user/loggedOut":return W;case"project/deleted":return c.projectId===n.projectId?W:n;case"stage/created":return n.stages=n.stages.concat(c),n;case"stage/updated":var r=n.stages.findIndex((function(e){return e.stageId===c.stageId}));return n.stages[r]=c,n;case"stage/deleted":return n.stages=n.stages.filter((function(e){return e.stageId!==c.stageId})),n;case"task/created":var s=n.stages.find((function(e){return e.stageId===c.stageId}));return s.tasks=s.tasks.concat(c.task),n;case"task/deleted":var a=n.stages.find((function(e){return e.stageId===c.stageId}));return a.tasks=a.tasks.filter((function(e){return e.taskId!==c.taskId})),n;case"task/updated":var o=n.stages.findIndex((function(e){return e.stageId===c.stageId})),i=n.stages[o].tasks.findIndex((function(e){return e.taskId===c.task.taskId}));return n.stages[o].tasks[i]=c.task,n;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,n=Object(z.a)({},e),c=t.payload;switch(t.type){case"user/created":return(n=c).flag="EMAIL_CONFIRMATION",n;case"user/loggedIn":return(n=c).flag="LOGGED_IN",n;case"user/loggedOut":return n={flag:"LOGGED_OUT"};case"user/deleted":return n={flag:"DELETED"};case"user/patched":return c.name&&(n.name=c.name),c.email&&(n.email=c.email),n;case"user/reorderProjects":return n.projects=c,n;case"project/created":return n.projects=n.projects.concat({title:c.title,projectId:c.projectId}),n;case"project/deleted":return n.projects=n.projects.filter((function(e){return e.projectId!==c.projectId})),n;default:return e}},token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.token?t.token:"user/loggedOut"===t.type?"":e}}),Y=q;n(146);a.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(o.a,{store:Object(l.createStore)(Y),children:Object(h.jsx)(i.a,{children:Object(h.jsx)(u.e,{children:Object(h.jsxs)(u.c,{path:"/",element:Object(h.jsx)(u.b,{}),children:[Object(h.jsx)(u.c,{index:!0,element:Object(h.jsx)(O,{})}),Object(h.jsx)(u.c,{path:"signup",element:Object(h.jsx)(H,{})}),Object(h.jsx)(u.c,{path:"logout",element:Object(h.jsx)(f,{})}),Object(h.jsx)(u.c,{path:"user/:userId/",element:Object(h.jsx)(F,{})}),Object(h.jsx)(u.c,{path:"user/:userId/projects",element:Object(h.jsx)(X,{})}),Object(h.jsx)(u.c,{path:"user/:userId/settings",element:Object(h.jsx)(V,{})}),Object(h.jsx)(u.c,{path:"project/:projectId",element:Object(h.jsx)(L,{})}),Object(h.jsx)(u.c,{path:"unsavedproject",element:Object(h.jsx)(R,{})}),Object(h.jsx)(u.c,{path:"*",element:Object(h.jsx)(O,{})})]})})})})}),document.getElementById("root")),J()},49:function(e,t,n){},64:function(e,t,n){}},[[147,1,2]]]);
//# sourceMappingURL=main.2ffb55a0.chunk.js.map