(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{22:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(6),o=n.n(a),s=n(2),i=n(7),u=(n(22),n(3)),l=n.n(u),d=n(5),p="localhost"===window.location.hostname?"http://localhost:5000":"https://taskflow.herokuapp.com",j=n(1);function b(){var e=Object(s.d)((function(e){return e.project.id})),t=Object(s.d)((function(e){return e.project.stages})),n=Object(s.d)((function(e){return e.user}),s.b),r=Object(s.c)();function c(){return(c=Object(d.a)(l.a.mark((function t(c){var a,o,s,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.preventDefault(),""!==(a=document.getElementById("new-stage-title").value)){t.next=5;break}return window.alert("You must enter a title to create a new stage"),t.abrupt("return");case 5:return o={method:"POST",headers:{Authorization:"Bearer ".concat(n.token),"Content-Type":"application/json"},body:JSON.stringify({stageTitle:a})},t.next=8,fetch("".concat(p,"/api/projects/").concat(e,"/stages"),o);case 8:if(!(s=t.sent).ok){t.next=17;break}return t.next=12,s.json();case 12:i=t.sent,console.log(i),r({type:"stage/created",payload:i}),t.next=18;break;case 17:console.log(s.status);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function a(){return(a=Object(d.a)(l.a.mark((function t(c){var a,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={method:"DELETE",headers:{Authorization:"Bearer ".concat(n.token)}},t.next=3,fetch("".concat(p,"/api/projects/").concat(e,"/stages/").concat(c),a);case 3:(o=t.sent).ok?r({type:"stage/deleted",payload:{id:c}}):console.log(o.status);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}console.log(t);var o=t?t.map((function(e){return Object(j.jsxs)("li",{children:[Object(j.jsx)("h3",{children:e.title}),Object(j.jsx)("button",{onClick:function(){return function(e){return a.apply(this,arguments)}(e.id)},children:"Delete Stage"}),Object(j.jsx)("hr",{})]},e.id)})):Object(j.jsx)("li",{children:"No stages yet"});return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:e}),Object(j.jsx)("ul",{children:t&&o}),Object(j.jsx)("textarea",{id:"new-stage-title"}),Object(j.jsx)("button",{onClick:function(e){return c.apply(this,arguments)},children:"Create Stage"})]})}var f=n(4),h=n(11);function O(){var e=Object(s.c)(),t=Object(s.d)((function(e){return e.user.projects}),s.b),n=Object(s.d)((function(e){return e.user}),s.b);function r(){return(r=Object(d.a)(l.a.mark((function t(r){var c,a,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),c={method:"POST",headers:{Authorization:"Bearer ".concat(n.token),"Content-Type":"application/json"},body:JSON.stringify({title:"".concat(document.getElementById("new-project-title").value)})},t.next=4,fetch("".concat(p,"/api/projects/"),c);case 4:if(!(a=t.sent).ok){t.next=13;break}return t.next=8,a.json();case 8:o=t.sent,console.log(o),e({type:"project/created",payload:o}),t.next=14;break;case 13:console.log(a.status);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function c(){return(c=Object(d.a)(l.a.mark((function t(r){var c,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={method:"DELETE",headers:{Authorization:"Bearer ".concat(n.token),"Content-Type":"application/json"}},t.next=3,fetch("".concat(p,"/api/projects/").concat(r),c);case 3:(a=t.sent).ok?e({type:"project/deleted",payload:{id:r}}):console.log(a.status);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function a(){return(a=Object(d.a)(l.a.mark((function t(r){var c,a,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={method:"GET",headers:{Authorization:"Bearer ".concat(n.token),"Content-Type":"application/json"}},t.next=3,fetch("".concat(p,"/api/projects/").concat(r),c);case 3:if(!(a=t.sent).ok){t.next=10;break}return t.next=7,a.json();case 7:o=t.sent,console.log(o),e({type:"project/loaded",payload:{id:r,stages:o}});case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var o=t.map((function(e){return Object(j.jsxs)("li",{children:[e,Object(j.jsx)("button",{onClick:function(){return function(e){return a.apply(this,arguments)}(e)},children:"Edit"}),Object(j.jsx)("button",{onClick:function(){return function(e){return c.apply(this,arguments)}(e)},children:"Delete"})]},e)}));return Object(j.jsxs)("div",{children:[t&&Object(j.jsx)("ul",{children:o}),Object(j.jsx)("textarea",{id:"new-project-title"}),Object(j.jsx)("button",{onClick:function(e){return r.apply(this,arguments)},children:"Create Project"})]})}function g(){var e=Object(s.c)(),t=Object(s.d)((function(e){return e.user}),s.b),n=Object(r.useState)(!1),c=Object(h.a)(n,2),a=c[0],o=c[1];function i(e){return u.apply(this,arguments)}function u(){return(u=Object(d.a)(l.a.mark((function t(n){var r,c,a,o,s,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=document.getElementById("user-email"),c=document.getElementById("user-password"),a={method:"POST",cache:"no-store",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.value,password:c.value})},t.next=6,fetch("".concat(p,"/api/users/login"),a);case 6:if(!(o=t.sent).ok){t.next=15;break}return t.next=10,o.json();case 10:s=t.sent,console.log(s),e({type:"user/loggedIn",payload:Object(f.a)(Object(f.a)({},s.user),{},{token:s.token})}),t.next=20;break;case 15:return t.next=17,o.json();case 17:i=t.sent,console.log(i.message||o),e({type:"user/failedLogin"});case 20:r.value="",c.value="";case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(){return(b=Object(d.a)(l.a.mark((function n(r){var c,a,o;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),c={method:"POST",cache:"no-store",headers:{Authorization:"Bearer ".concat(t.token)}},n.next=4,fetch("".concat(p,"/api/users/logout"),c);case 4:if((a=n.sent).ok){n.next=14;break}return console.log(a.status),n.next=9,a.json();case 9:o=n.sent,console.log(o.message||a),e({type:"user/loggedOut"}),n.next=15;break;case 14:e({type:"user/loggedOut"});case 15:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(r.useEffect)((function(){console.log(t)}),[t]),t.name?Object(j.jsxs)("div",{children:["".concat(t.name," "),Object(j.jsx)("button",{onClick:function(e){return b.apply(this,arguments)},children:"Log Out"}),Object(j.jsx)("hr",{}),Object(j.jsx)("button",{onClick:function(){return o(!a)},children:"Toggle Projects List"}),a&&Object(j.jsx)(O,{})]}):Object(j.jsxs)("div",{children:["Log In:",Object(j.jsxs)("form",{onSubmit:i,children:[Object(j.jsx)("span",{children:"User Name: "}),Object(j.jsx)("input",{id:"user-name",type:"text"}),Object(j.jsx)("br",{}),Object(j.jsx)("span",{children:"Email: "}),Object(j.jsx)("input",{id:"user-email",type:"text"}),Object(j.jsx)("br",{}),Object(j.jsx)("span",{children:"Password: "}),Object(j.jsx)("input",{id:"user-password",type:"text"}),Object(j.jsx)("button",{type:"login",onClick:i,children:"Log In"}),Object(j.jsx)("button",{type:"submit",children:"Sign Up"})]})]})}var x=function(){var e=Object(s.d)((function(e){return e.project}),s.b);return console.log(e),Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(g,{}),Object(j.jsx)("hr",{}),e.id?Object(j.jsx)(b,{}):"No Project Selected"]})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))},v={id:0,title:"",stages:[]};var k={};var m=Object(i.a)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0,n=Object(f.a)({},e);switch(t.type){case"user/created":return(n=t.payload).flag="EMAIL_CONFIRMATION",n;case"user/loggedIn":return(n=t.payload).flag="LOGGED_IN",n;case"user/failedLogin":return n={flag:"FAILED_LOGIN"};case"user/loggedOut":return n={flag:"LOGGED_OUT"};case"user/deleted":return n={flag:"DELETED"};case"project/created":return n.projects=n.projects.concat(t.payload.id),n;case"project/deleted":return n.projects=n.projects.filter((function(e){return e!==t.payload.id})),n;default:return e}},project:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,n=Object(f.a)({},e);switch(t.type){case"project/created":return(n=t.payload).stages=[],n;case"project/loaded":return n=t.payload;case"project/unloaded":return v;case"project/deleted":return console.log(t.payload.id),t.payload.id===n.id?v:n;case"stage/created":case"task/created":return console.log(t.payload),n.stages=n.stages.concat(t.payload),n;case"stage/deleted":case"task/deleted":return n.stages=n.stages.filter((function(e){return e.id!==t.payload.id})),n;default:return e}}}),w=m;n(25);o.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(s.a,{store:Object(i.b)(w),children:Object(j.jsx)(x,{})})}),document.getElementById("root")),y()}},[[26,1,2]]]);
//# sourceMappingURL=main.fc93f64a.chunk.js.map