{"version":3,"sources":["reportWebVitals.js","state/projectReducer.js","state/userReducer.js","state/rootReducer.js","state/tokenReducer.js","utils/apiDomain.js","utils/createRequest.js","utils/handleApiError.js","hooks/useRequestTools.js","components/LoginForm.js","components/PreviewInitializer.js","components/SignupForm.js","components/Pages/HomePage.js","components/Pages/LogoutPage.js","components/UserPanel.js","components/Header.js","hooks/useLogout.js","hooks/useCustomDrag.js","hooks/useHorizontalDrop.js","utils/itemTypes.js","components/ProjectTab.js","components/Navbar.js","hooks/useVerticalDrop.js","components/StageEditor.js","components/TaskEditor.js","components/Task.js","components/Stage.js","components/StageCreator.js","components/ProjectBoard.js","components/Pages/ProjectPage.js","components/Pages/UserPage.js","components/NewProjectCreator.js","components/ProjectDetails.js","components/ProjectsMenu.js","components/UserSettingsMenu.js","components/App.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","projectId","title","stages","rootReducer","combineReducers","project","prevState","action","state","payload","type","index","findIndex","stage","stageId","concat","filter","find","tasks","task","taskId","stageIndex","taskIndex","user","flag","name","email","projects","token","apiDomain","window","location","hostname","createRequest","method","json","request","headers","Authorization","cache","body","JSON","stringify","handleApiError","response","a","text","message","error","alert","useRequestTools","useDispatch","useSelector","LoginForm","active","dispatch","PATH","e","preventDefault","document","getElementById","password","value","fetch","ok","result","id","className","onSubmit","placeholder","PreviewInitializer","onClick","SignupMenu","navigate","useNavigate","password1","password2","HomePage","shallowEqual","useState","activeMode","setActiveMode","useEffect","useLayoutEffect","scrollIntoView","alt","src","LogoutPage","setTimeout","UserPanel","logoutUser","confirm","Header","useLogout","useCustomDrag","itemType","canDrag","useDrag","item","collect","monitor","isDragging","drag","useHorizontalDrop","reorderProjects","ref","useDrop","accept","hover","current","sourceIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleX","right","left","hoverClientX","getClientOffset","x","ItemTypes","ProjectTab","isActiveProject","loadProject","useRef","drop","style","opacity","NavPane","currentProjectId","useCallback","get","newProjects","splice","map","renderProjectTab","useVerticalDrop","hoverMiddleY","bottom","top","hoverClientY","Y","StageEditor","toggleStageEditor","titleField","newTitle","focus","maxLength","defaultValue","TaskEditor","details","toggleTaskEditor","detailsField","newDetails","requestType","URL","dispatchType","required","rows","Task","reorderTasks","isTaskEditorOpen","length","console","log","newStageId","verticalDrop","markTaskComplete","handleDeleteTask","Stage","reorderStages","stageRef","isTaskCreatorOpen","toggleTaskCreator","isStageEditorOpen","horizontalDrop","newTasks","taskList","handleDeleteStage","StageCreator","toggleStageCreator","stageCreatorElement","classList","remove","handleCreateStage","ProjectBoard","isStageCreatorOpen","newStages","stageList","ProjectPage","backend","HTML5Backend","UserPage","activeStyle","borderLeft","borderTop","borderRight","color","inactiveStyle","userSettingsButton","to","isActive","NewProjectCreator","toggleActive","ProjectDetails","isEditing","selectEditor","handleDeleteProject","handleEditProject","handleLoadProject","UserProjects","activeEditor","listProjects","UserSettings","isEditingUsername","toggleEditingUsername","newUsername","setNewUsername","usernameField","isEditingEmail","toggleEditingEmail","newEmail","setNewEmail","emailField","isEditingPassword","toggleEditingPassword","currentPasswordField","newPasswordField1","newPasswordField2","isDeletingUser","toggleDeletingUser","deleteUserPassword","currentPassword","newPassword1","newpassword2","oldPassword","newPassword","usernameSection","onChange","target","emailAddressSection","passwordSection","resetPasswordFields","deleteUserSection","deleteUser","App","path","element","ReactDOM","render","StrictMode","store","createStore"],"mappings":"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","file":"static/js/main.eda80b3f.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","/* This reducer handles redux actions affecting state.project */\r\n\r\nconst initialState = {\r\n  projectId: null,\r\n  title: \"\",\r\n  stages: [],\r\n};\r\n\r\nexport default function projectReducer(prevState = initialState, action) {\r\n  let state = { ...prevState }; // mutate new state not prevState\r\n  const payload = action.payload;\r\n\r\n  switch (action.type) {\r\n    /***** Project actions *****/\r\n    case \"project/reorderStages\": {\r\n      state.stages = payload;\r\n      return state;\r\n    }\r\n    case \"project/loaded\": {\r\n      state = payload;\r\n      return state;\r\n    }\r\n    case \"project/unloaded\": {\r\n      return initialState;\r\n    }\r\n    case \"project/updated\": {\r\n      if (state.projectId === payload.projectId) {\r\n        // if current project updated\r\n        state = payload;\r\n      }\r\n      return state;\r\n    }\r\n    case \"project/deleted\": {\r\n      // TODO: amend to just payload not payload.project\r\n      if (payload.projectId === state.projectId) {\r\n        return initialState;\r\n      }\r\n      return state;\r\n    }\r\n\r\n    /***** Stage actions *****/\r\n    case \"stage/reorderTasks\": {\r\n      const index = state.stages.findIndex(\r\n        (stage) => stage.stageId === payload.stageId\r\n      );\r\n      state.stages[index] = payload;\r\n      return state;\r\n    }\r\n    case \"stage/created\": {\r\n      state.stages = state.stages.concat(payload);\r\n      return state;\r\n    }\r\n    case \"stage/updated\": {\r\n      const index = state.stages.findIndex(\r\n        (stage) => stage.stageId === payload.stageId\r\n      );\r\n      state.stages[index] = payload;\r\n      return state;\r\n    }\r\n    case \"stage/deleted\": {\r\n      state.stages = state.stages.filter(\r\n        (stage) => stage.stageId !== payload.stageId\r\n      );\r\n      return state;\r\n    }\r\n\r\n    /***** Task actions *****/\r\n    case \"task/created\": {\r\n      // find stage\r\n      const stage = state.stages.find(\r\n        (stage) => stage.stageId === payload.stageId\r\n      );\r\n      // add new task\r\n      stage.tasks = stage.tasks.concat(payload.task);\r\n      return state;\r\n    }\r\n    case \"task/deleted\": {\r\n      // find stage\r\n      const stage = state.stages.find(\r\n        (stage) => stage.stageId === payload.stageId\r\n      );\r\n      // delete task\r\n      stage.tasks = stage.tasks.filter(\r\n        (task) => task.taskId !== payload.taskId\r\n      );\r\n      return state;\r\n    }\r\n    case \"task/updated\": {\r\n      // locate stage\r\n      const stageIndex = state.stages.findIndex(\r\n        (stage) => stage.stageId === payload.stageId\r\n      );\r\n      // locate task\r\n      const taskIndex = state.stages[stageIndex].tasks.findIndex(\r\n        (task) => task.taskId === payload.task.taskId\r\n      );\r\n      state.stages[stageIndex].tasks[taskIndex] = payload.task;\r\n      return state;\r\n    }\r\n\r\n    /***** User actions *****/\r\n    case \"user/loggedOut\": {\r\n      return initialState;\r\n    }\r\n\r\n    /***** Default *****/\r\n    default:\r\n      return prevState;\r\n  }\r\n}\r\n","/* This reducer handles redux actions affecting state.user */\r\n\r\nconst initialState = {};\r\n\r\nexport default function userReducer(prevState = initialState, action) {\r\n  let state = { ...prevState }; // mutate new copy of state not prevState\r\n  const payload = action.payload;\r\n\r\n  switch (action.type) {\r\n    case \"user/created\":\r\n      state = payload;\r\n      return state;\r\n\r\n    case \"user/loggedIn\":\r\n      state = payload;\r\n      state.flag = \"LOGGED_IN\";\r\n      return state;\r\n\r\n    case \"user/loggedOut\":\r\n      state = { flag: \"LOGGED_OUT\" };\r\n      return state;\r\n\r\n    case \"user/deleted\":\r\n      state = { flag: \"DELETED\" };\r\n      return state;\r\n\r\n    case \"user/patched\":\r\n      if (payload.name) {\r\n        state.name = payload.name;\r\n      }\r\n      if (payload.email) {\r\n        state.email = payload.email;\r\n      }\r\n      return state;\r\n\r\n    case \"user/reorderProjects\":\r\n      /* Currently this triggers re-render of stages & tasks */\r\n      /* This is unnecessary and may be optimized */\r\n      state.projects = payload;\r\n      return state;\r\n\r\n    case \"project/created\":\r\n      /* add project data to user.projects */\r\n      state.projects = state.projects.concat({\r\n        title: payload.title,\r\n        projectId: payload.projectId,\r\n      });\r\n      return state;\r\n\r\n    /* Updates to project metadata, such as title, are handled by */\r\n    /* both userReducer and projectReducer */\r\n    case \"project/updated\":\r\n      // Find matching project in user.projects\r\n      const index = state.projects.findIndex(\r\n        (project) => project.projectId === payload.projectId\r\n      );\r\n      /* Replace project title with payload title*/\r\n      state.projects[index].title = payload.title;\r\n      return state;\r\n\r\n    case \"project/deleted\":\r\n      // remove deleted project from user.projects\r\n      state.projects = state.projects.filter(\r\n        (project) => project.projectId !== payload.projectId\r\n      );\r\n      return state;\r\n\r\n    default:\r\n      /* Return prevState so as not to trigger component updates */\r\n      return prevState;\r\n  }\r\n}\r\n","import { combineReducers } from \"redux\";\r\nimport projectReducer from \"./projectReducer\";\r\nimport tokenReducer from \"./tokenReducer\";\r\nimport userReducer from \"./userReducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n  project: projectReducer,\r\n  user: userReducer,\r\n  token: tokenReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","/* Refreshes auth token or deletes token on logout*/\r\nconst initialState = \"\";\r\n\r\nexport default function tokenReducer(prevState = initialState, action) {\r\n  if (action.token) {\r\n    return action.token;\r\n  }\r\n  if (action.type === \"user/loggedOut\") {\r\n    return initialState;\r\n  }\r\n  return prevState;\r\n}\r\n","/********************* FOR DEVELOPMENT ONLY. *************************/\r\n/* Basically a client-side environmental variable holding URL of API */\r\n/* In production, this can be replaced with a constant */\r\n\r\nexport const apiDomain =\r\n  window.location.hostname === \"localhost\"\r\n    ? \"http://localhost:5000\"\r\n    : \"https://taskflow.herokuapp.com\";\r\n","/* Creates API requests */\r\n/* This creates any request for which auth is needed */\r\n\r\nexport default function createRequest(method, token, json) {\r\n  const request = {\r\n    method: method,\r\n    headers: {\r\n      Authorization: token,\r\n      cache: \"no-store\",\r\n    },\r\n  };\r\n\r\n  if (json) {\r\n    request.headers[\"Content-Type\"] = \"application/json\";\r\n    request.body = JSON.stringify(json);\r\n  }\r\n\r\n  return request;\r\n}\r\n","export default async function handleApiError(response) {\r\n  let message;\r\n\r\n  /* If response is text format */\r\n  if (response.text) {\r\n    message = await response.text();\r\n\r\n    /* If response is json format */\r\n  } else if (response.json) {\r\n    message = await response.json();\r\n\r\n    /* If response json contains error property (database error) */\r\n    if (message.error) {\r\n      message = response.error;\r\n    }\r\n\r\n    /* If response contains no obvious message */\r\n  } else {\r\n    message =\r\n      \"Unknown Error. Please try again or contact the site administrator.\";\r\n  }\r\n\r\n  alert(`Error: ${message}`);\r\n}\r\n","/* This file consolidates boilerplate code for API requests. */\r\n/* Essentially a parameter object in the form of a react hook */\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { apiDomain } from \"../utils/apiDomain\";\r\nimport createRequest from \"../utils/createRequest\";\r\nimport handleApiError from \"../utils/handleApiError\";\r\n\r\nexport default function useRequestTools() {\r\n  const dispatch = useDispatch();\r\n  const PATH = `${apiDomain}/api`; // The path to the server API\r\n  const token = useSelector((state) => state.token); // User auth token\r\n\r\n  return [createRequest, dispatch, handleApiError, PATH, token];\r\n}\r\n","import useRequestTools from \"../hooks/useRequestTools\";\r\n\r\nexport default function LoginForm({ active }) {\r\n  const [createRequest, dispatch, handleApiError, PATH] = useRequestTools();\r\n\r\n  async function handleLogin(e) {\r\n    e.preventDefault();\r\n    const email = document.getElementById(\"login-user-email\");\r\n    const password = document.getElementById(\"login-user-password\");\r\n\r\n    const request = createRequest(\"POST\", null, {\r\n      email: email.value,\r\n      password: password.value,\r\n    });\r\n\r\n    const response = await fetch(`${PATH}/users/login`, request);\r\n    if (response.ok) {\r\n      const result = await response.json();\r\n      dispatch({\r\n        type: \"user/loggedIn\",\r\n        payload: result.user,\r\n        token: result.token,\r\n      });\r\n    } else handleApiError(response);\r\n\r\n    email.value = \"\"; // reset credential fields\r\n    password.value = \"\";\r\n  }\r\n\r\n  return (\r\n    <form\r\n      id=\"login-form\"\r\n      className={active ? \"active\" : \"inactive\"}\r\n      onSubmit={handleLogin}\r\n    >\r\n      <input id=\"login-user-email\" type=\"text\" placeholder=\"E-mail\" />\r\n      <input id=\"login-user-password\" type=\"password\" placeholder=\"Password\" />\r\n      <button type=\"submit\" className=\"btn-confirm\">\r\n        Log In\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n","import useRequestTools from \"../hooks/useRequestTools\";\r\n\r\nexport default function PreviewInitializer({ active }) {\r\n  const [createRequest, dispatch, handleApiError, PATH] = useRequestTools();\r\n\r\n  async function initializePreview() {\r\n    const request = createRequest(\"POST\", null, {});\r\n    const response = await fetch(`${PATH}/users/temp/`, request);\r\n    if (response.ok) {\r\n      const result = await response.json();\r\n      dispatch({\r\n        type: \"user/created\",\r\n        payload: { flag: \"TEMP\", ...result.user },\r\n        token: result.token,\r\n      });\r\n      alert(\r\n        \"A temporary user profile has been created for you. If you wish to save your projects, create an account by clicking on the user tab in the top right corner.\"\r\n      );\r\n    } else handleApiError(response);\r\n  }\r\n\r\n  return (\r\n    <div id=\"preview-initializer\" className={active ? \"active\" : \"inactive\"}>\r\n      <p id=\"preview-details\">\r\n        You can try the app without creating an account. Your work will not be\r\n        saved unless you sign up.\r\n      </p>\r\n      <button className=\"btn-confirm\" onClick={initializePreview}>\r\n        Try it out!\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","/* This page lets users sign up */\r\n\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport useRequestTools from \"../hooks/useRequestTools\";\r\n\r\nexport default function SignupMenu({ active }) {\r\n  const [createRequest, dispatch, handleApiError, PATH, token] =\r\n    useRequestTools();\r\n  const user = useSelector((state) => state.user);\r\n  const navigate = useNavigate();\r\n\r\n  async function handleSignup(e) {\r\n    e.preventDefault();\r\n    const name = document.getElementById(\"new-user-name\");\r\n    const email = document.getElementById(\"new-user-email\");\r\n    const password1 = document.getElementById(\"new-user-password-1\");\r\n    const password2 = document.getElementById(\"new-user-password-2\");\r\n\r\n    /* Check if password fields match */\r\n    if (password1.value !== password2.value) {\r\n      alert(\"Passwords do not match. Try again.\");\r\n      password1.value = \"\";\r\n      password2.value = \"\";\r\n      return;\r\n    }\r\n\r\n    const request = // request depends on if temp user is signed in\r\n      user.flag === \"TEMP\"\r\n        ? createRequest(\"POST\", token, {\r\n            name: name.value,\r\n            email: email.value,\r\n            password: password1.value,\r\n            flag: \"IMPORT\",\r\n          })\r\n        : createRequest(\"POST\", null, {\r\n            name: name.value,\r\n            email: email.value,\r\n            password: password1.value,\r\n          });\r\n\r\n    /* Send request and process response */\r\n    const response = await fetch(`${PATH}/users`, request);\r\n    if (response.ok) {\r\n      const result = await response.json();\r\n      dispatch({\r\n        type: \"user/created\",\r\n        payload: result.user,\r\n        token: result.token,\r\n      });\r\n      alert(\r\n        `User created: \\nName: ${result.user.name}\\nEmail: ${result.user.email}`\r\n      );\r\n      navigate(`/users/${result.user.id}/projects`);\r\n    } else handleApiError(response);\r\n\r\n    name.value = \"\"; // reset credential fields\r\n    email.value = \"\";\r\n    password1.value = \"\";\r\n    password2.value = \"\";\r\n  }\r\n\r\n  return (\r\n    <form\r\n      id=\"signup-form\"\r\n      className={active ? \"active\" : \"inactive\"}\r\n      onSubmit={handleSignup}\r\n    >\r\n      <input\r\n        id=\"new-user-name\"\r\n        className=\"form-input\"\r\n        type=\"text\"\r\n        placeholder=\"User Name\"\r\n      />\r\n      <input\r\n        id=\"new-user-email\"\r\n        className=\"form-input\"\r\n        type=\"text\"\r\n        placeholder=\"Email Address\"\r\n      />\r\n      <input\r\n        id=\"new-user-password-1\"\r\n        className=\"form-input\"\r\n        type=\"password\"\r\n        placeholder=\"Password\"\r\n      />\r\n      <input\r\n        id=\"new-user-password-2\"\r\n        className=\"form-input\"\r\n        type=\"password\"\r\n        placeholder=\"Re-type password\"\r\n      />\r\n      <div className=\"options-block\">\r\n        <button type=\"submit\" className=\"btn-confirm\">\r\n          Sign Up\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n","/* This is the home page for users. It contains options to log in, */\r\n/* sign up, or preview the app */\r\n\r\nimport { useEffect, useLayoutEffect, useState } from \"react\";\r\nimport { shallowEqual, useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport LoginForm from \"../LoginForm\";\r\nimport PreviewInitializer from \"../PreviewInitializer\";\r\nimport SignupForm from \"../SignupForm\";\r\n\r\nexport default function HomePage() {\r\n  const navigate = useNavigate();\r\n  const user = useSelector((state) => state.user, shallowEqual);\r\n\r\n  const [activeMode, setActiveMode] = useState(\"\"); // determines which form is active\r\n  /* Note: these states must === element IDs */\r\n\r\n  /* Upon login navigate to user page */\r\n  useEffect(() => {\r\n    if (user.id) {\r\n      if (user.flag === \"TEMP\") navigate(`../preview/${user.id}/projects`);\r\n      else navigate(`../users/${user.id}/projects`);\r\n    }\r\n  }, [user, navigate]);\r\n\r\n  /* Scroll to active section after DOM mutation */\r\n  useLayoutEffect(() => {\r\n    if (activeMode) {\r\n      const scrollDestination = document.getElementById(`${activeMode}`);\r\n      scrollDestination.scrollIntoView();\r\n    }\r\n  });\r\n\r\n  return (\r\n    <main className=\"home-page\">\r\n      <img className=\"logo\" alt=\"Taskflow.tech\" src=\"/logo.png\" />\r\n      <h2 onClick={() => setActiveMode(\"login-form\")}>Login</h2>\r\n      <LoginForm active={activeMode === \"login-form\" ? true : false} />\r\n      <br />\r\n      <h2 onClick={() => setActiveMode(\"signup-form\")}>Sign Up</h2>\r\n      <SignupForm active={activeMode === \"signup-form\" ? true : false} />\r\n      <br />\r\n      <h2 onClick={() => setActiveMode(\"preview-initializer\")}>\r\n        Preview the app\r\n      </h2>\r\n      <PreviewInitializer\r\n        active={activeMode === \"preview-initializer\" ? true : false}\r\n      />\r\n    </main>\r\n  );\r\n}\r\n","/* Just a splash screen informing user they have been logged out */\r\n/* Redirects to homepage after timeout */\r\n\r\nimport { useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function LogoutPage() {\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      navigate(\"/\");\r\n    }, 1500);\r\n  }, [navigate]);\r\n\r\n  return (\r\n    <main className=\"home-page\">\r\n      <img className=\"logo\" alt=\"Taskflow.tech\" src=\"/logo.png\" />\r\n      <br />\r\n      <h2>You have been logged out and will be redirected.</h2>\r\n    </main>\r\n  );\r\n}\r\n","/* This component displays user.name and a logout button if */\r\n/* user is logged in, and a login link otherwise */\r\n/* This is meant as a subcomponent of PageHeader */\r\n\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport useRequestTools from \"../hooks/useRequestTools\";\r\n\r\nexport default function UserPanel() {\r\n  const [createRequest, dispatch, handleApiError, PATH, token] =\r\n    useRequestTools();\r\n  const navigate = useNavigate();\r\n  const user = useSelector((state) => state.user);\r\n\r\n  async function logoutUser() {\r\n    if (user.flag === \"TEMP\") {\r\n      if (\r\n        !window.confirm(\r\n          \"Do you want to log out? Your work will not be saved because you haven't created an account.\"\r\n        )\r\n      )\r\n        return;\r\n    }\r\n    const request = createRequest(\"POST\", token);\r\n    const response = await fetch(`${PATH}/users/logout`, request);\r\n    if (response.ok) {\r\n      navigate(\"/logout\");\r\n    } else handleApiError(response);\r\n\r\n    setTimeout(() => {\r\n      dispatch({ type: \"user/loggedOut\" });\r\n    }, 500);\r\n  }\r\n\r\n  if (user.flag === \"TEMP\") {\r\n    return (\r\n      <div className=\"dropdown user-panel\">\r\n        <button id=\"btn-user-name\">{user.name || \"Anonymous User\"}</button>\r\n        <div className=\"dropdown-menu\">\r\n          <button onClick={() => navigate(`/users/${user.id}/signup`)}>\r\n            Sign Up\r\n          </button>\r\n          <button onClick={() => navigate(`/users/${user.id}/projects`)}>\r\n            My Projects\r\n          </button>\r\n          <button onClick={() => logoutUser()} id=\"btn-logout\">\r\n            Log Out\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <div className=\"dropdown user-panel\">\r\n        <button id=\"btn-user-name\">{user.name || \"Anonymous User\"}</button>\r\n        <div className=\"dropdown-menu\">\r\n          <button onClick={() => navigate(`/users/${user.id}/settings`)}>\r\n            Settings\r\n          </button>\r\n          <button onClick={() => navigate(`/users/${user.id}/projects`)}>\r\n            My Projects\r\n          </button>\r\n          <button onClick={() => logoutUser()} id=\"btn-logout\">\r\n            Log Out\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import useLogout from \"../hooks/useLogout\";\r\nimport UserPanel from \"./UserPanel\";\r\n\r\nexport default function Header() {\r\n  useLogout();\r\n\r\n  return (\r\n    <header>\r\n      <div id=\"app-title\">\r\n        <img className=\"logo\" alt=\"logo\" src=\"/logo-smol.png\" />\r\n      </div>\r\n      <UserPanel />\r\n    </header>\r\n  );\r\n}\r\n","/* This hook ensures any components using it are only accessible */\r\n/* while user is signed in */\r\n\r\nimport { useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function useLogout() {\r\n  const token = useSelector((state) => state.token);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (!token) {\r\n      navigate(\"../logout\");\r\n    }\r\n\r\n    // TODO: implement token expiration UI handling\r\n  }, [token, navigate]);\r\n}\r\n","/* Implements useDrag from react-dnd for drag-and-drop */\r\n\r\n/* todo: switch to dndkit */\r\n\r\nimport { useDrag } from \"react-dnd\";\r\n\r\nexport default function useCustomDrag(itemType, index, canDrag = true) {\r\n  const [{ isDragging }, drag] = useDrag({\r\n    type: itemType,\r\n    item: () => {\r\n      return { index };\r\n    },\r\n    collect: (monitor) => {\r\n      return { isDragging: monitor.isDragging() };\r\n    },\r\n    /* inhibit dragging if canDrag === false */\r\n    canDrag: (monitor) => {\r\n      if (canDrag === false) {\r\n        return false;\r\n      } else return true;\r\n    },\r\n  });\r\n\r\n  return [drag, isDragging];\r\n}\r\n","/* Implements useDrop from react-dnd for horizontal drag-and-drop */\r\n\r\nimport { useDrop } from \"react-dnd\";\r\n\r\nexport default function useHorizontalDrop(\r\n  itemType,\r\n  index,\r\n  reorderProjects,\r\n  ref\r\n) {\r\n  const [, drop] = useDrop({\r\n    accept: itemType,\r\n    hover(item, monitor) {\r\n      if (!ref.current) {\r\n        return;\r\n      }\r\n      // The source index where item is being dragged from\r\n      const sourceIndex = item.index;\r\n      // Index of current hover position\r\n      const hoverIndex = index;\r\n      // Don't replace items with themselves\r\n      if (sourceIndex === hoverIndex) {\r\n        return;\r\n      }\r\n      // Determine rectangle on screen\r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\r\n      // Get horizontal middle\r\n      const hoverMiddleX =\r\n        (hoverBoundingRect.right - hoverBoundingRect.left) / 2;\r\n      // Determine mouse position\r\n      const clientOffset = monitor.getClientOffset();\r\n      // Get pixels to the left\r\n      const hoverClientX = clientOffset.x - hoverBoundingRect.left;\r\n      // Only perform the move when the mouse has crossed half of the item's width\r\n      // When dragging leftwards, only move when the cursor is left of 50%\r\n      // When dragging rightwards, only move when the cursor is right 50%\r\n      if (sourceIndex < hoverIndex && hoverClientX < hoverMiddleX) {\r\n        return;\r\n      }\r\n      if (sourceIndex > hoverIndex && hoverClientX > hoverMiddleX) {\r\n        return;\r\n      }\r\n      // Reorder projects if all above checks have passed\r\n      reorderProjects(sourceIndex, hoverIndex);\r\n      item.index = hoverIndex;\r\n    },\r\n  });\r\n\r\n  return drop;\r\n}\r\n","/* This enum gives draggable item types for react-dnd library */\r\n\r\nexport const ItemTypes = {\r\n  PROJECTTAB: \"projectTab\",\r\n  STAGE: \"stage\",\r\n  TASK: \"task\",\r\n};\r\n","/* A tab that lists a projects's title. */\r\n/* These tabs implement Drag and Drop horizontally */\r\n\r\n/* TODO: memoize this component */\r\n\r\nimport { useRef } from \"react\";\r\nimport useCustomDrag from \"../hooks/useCustomDrag\";\r\nimport useHorizontalDrop from \"../hooks/useHorizontalDrop\";\r\nimport { ItemTypes } from \"../utils/itemTypes\";\r\n\r\nexport default function ProjectTab({\r\n  index,\r\n  title,\r\n  projectId,\r\n  isActiveProject,\r\n  reorderProjects,\r\n  loadProject,\r\n}) {\r\n  const ref = useRef(null);\r\n\r\n  const [drag, isDragging] = useCustomDrag(ItemTypes.PROJECTTAB, index);\r\n\r\n  const drop = useHorizontalDrop(\r\n    ItemTypes.PROJECTTAB,\r\n    index,\r\n    reorderProjects,\r\n    ref\r\n  );\r\n\r\n  drag(drop(ref));\r\n\r\n  return (\r\n    <li\r\n      ref={ref}\r\n      className={isActiveProject ? \"active tab\" : \"inactive tab\"}\r\n      onClick={() => loadProject(projectId)}\r\n      style={{ opacity: isDragging ? 0 : 1 }}\r\n      title={`Open ${title} or drag to rearrange`}\r\n    >\r\n      {title}\r\n    </li>\r\n  );\r\n}\r\n","/* This is a component of the ProjectPage and is used to */\r\n/* navigate between projects, and allows */\r\n/* projects to be reordered through drag-and-drop. */\r\n/* This component is shaped like a row of folder tabs with active tab on top */\r\n\r\n/* Functions herein are declared as useCallback for memo-ization */\r\n/* for performance because navbar and subcomponents will be */\r\n/* re-rendered very frequently during drag and drop */\r\n\r\nimport { useCallback } from \"react\";\r\nimport { shallowEqual, useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport useRequestTools from \"../hooks/useRequestTools\";\r\nimport ProjectTab from \"./ProjectTab\";\r\n\r\nexport default function NavPane() {\r\n  const [createRequest, dispatch, handleApiError, PATH, token] =\r\n    useRequestTools();\r\n  const navigate = useNavigate();\r\n  const projects = useSelector((state) => state.user.projects, shallowEqual);\r\n  const currentProjectId = useSelector((state) => state.project.projectId);\r\n\r\n  /* Load a project from server */\r\n  const loadProject = useCallback(\r\n    async (projectId) => {\r\n      const request = createRequest(\"GET\", token);\r\n      const response = await fetch(`${PATH}/projects/${projectId}`, request);\r\n      if (response.ok) {\r\n        const token = response.headers.get(\"X-Auth-Token\");\r\n        const result = await response.json();\r\n        dispatch({\r\n          type: \"project/loaded\",\r\n          payload: result.project,\r\n          token: token,\r\n        });\r\n        navigate(`../projects/${projectId}`);\r\n      } else handleApiError(response);\r\n    },\r\n    [token, createRequest, dispatch, handleApiError, PATH, navigate]\r\n  );\r\n\r\n  /* reorder projects */\r\n  const reorderProjects = useCallback(\r\n    async (sourceIndex, hoverIndex) => {\r\n      if (!token) return; // abort if user logged out\r\n      const newProjects = [...projects]; // copy state for mutations\r\n      newProjects.splice(hoverIndex, 0, newProjects.splice(sourceIndex, 1)[0]);\r\n\r\n      /* dispatch reorder to redux state */\r\n      dispatch({ type: \"user/reorderProjects\", payload: newProjects });\r\n\r\n      /* send API request */\r\n      const request = createRequest(\"PATCH\", token, {\r\n        projects: newProjects.map((project) => project.projectId),\r\n      });\r\n      const response = await fetch(`${PATH}/users/`, request);\r\n      if (response.ok) {\r\n        const token = response.headers.get(\"X-Auth-Token\");\r\n        if (token) dispatch({ type: \"token/refresh\", token: token });\r\n      } else handleApiError(response);\r\n    },\r\n    [projects, token, createRequest, dispatch, handleApiError, PATH]\r\n  );\r\n\r\n  /* renders one projectTab within tabrow */\r\n  const renderProjectTab = useCallback(\r\n    (index, title, projectId) => {\r\n      return (\r\n        <ProjectTab\r\n          key={projectId}\r\n          index={index}\r\n          title={title}\r\n          projectId={projectId}\r\n          isActiveProject={projectId === currentProjectId}\r\n          reorderProjects={reorderProjects}\r\n          loadProject={loadProject}\r\n        />\r\n      );\r\n    },\r\n    [currentProjectId, reorderProjects, loadProject]\r\n  );\r\n\r\n  return (\r\n    <nav id=\"navbar\">\r\n      <ul className=\"tab-row\">\r\n        {projects?.map((project, index) =>\r\n          renderProjectTab(index, project.title, project.projectId)\r\n        )}\r\n      </ul>\r\n    </nav>\r\n  );\r\n}\r\n","/* Implements useDrop from react-dnd for vertical drag-and-drop */\r\n\r\nimport { useDrop } from \"react-dnd\";\r\n\r\nexport default function useVerticalDrop(itemType, index, reorderProjects, ref) {\r\n  const [, drop] = useDrop({\r\n    accept: itemType,\r\n    hover(item, monitor) {\r\n      if (!ref.current) {\r\n        return;\r\n      }\r\n      // The source index where item is being dragged from\r\n      const sourceIndex = item.index;\r\n      // Index of current hover position\r\n      const hoverIndex = index;\r\n      // Don't replace items with themselves\r\n      if (sourceIndex === hoverIndex) {\r\n        return;\r\n      }\r\n      // Determine rectangle on screen\r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\r\n      // Get vertical middle\r\n      const hoverMiddleY =\r\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n      // Determine mouse position\r\n      const clientOffset = monitor.getClientOffset();\r\n      // Get pixels to the top\r\n      const hoverClientY = clientOffset.Y - hoverBoundingRect.top;\r\n      // Only perform the move when the mouse has crossed half of the item's height\r\n      // When dragging downwards, only move when the cursor is below 50%\r\n      // When dragging upwards, only move when the cursor is above 50%\r\n      if (sourceIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return;\r\n      }\r\n      if (sourceIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return;\r\n      }\r\n      // Reorder projects if all above checks have passed\r\n      reorderProjects(sourceIndex, hoverIndex);\r\n      item.index = hoverIndex;\r\n    },\r\n  });\r\n\r\n  return drop;\r\n}\r\n","/* This edits a stage's title. */\r\n/* It is an uncontrolled component: */\r\n/* https://reactjs.org/docs/uncontrolled-components.html */\r\n\r\nimport { useLayoutEffect, useRef } from \"react\";\r\nimport useRequestTools from \"../hooks/useRequestTools\";\r\n\r\nexport default function StageEditor({ stageId, title, toggleStageEditor }) {\r\n  const [createRequest, dispatch, handleApiError, PATH, token] =\r\n    useRequestTools();\r\n  const titleField = useRef(null);\r\n\r\n  /* focus on form when element opens */\r\n  useLayoutEffect(() => {\r\n    titleField.current.focus();\r\n  });\r\n\r\n  /* Edit stage's title */\r\n  async function handleEditStageName(e) {\r\n    e.preventDefault();\r\n\r\n    /* Get new stage title */\r\n    const newTitle = titleField.current.value;\r\n\r\n    const request = createRequest(\"PATCH\", token, {\r\n      title: newTitle,\r\n    });\r\n    /* Send request */\r\n    const response = await fetch(`${PATH}/stages/${stageId}`, request);\r\n    if (response.ok) {\r\n      const token = response.headers.get(\"X-Auth-Token\");\r\n      const result = await response.json();\r\n      dispatch({ type: \"stage/updated\", payload: result, token: token });\r\n      toggleStageEditor(false);\r\n    } else handleApiError(response);\r\n  }\r\n\r\n  return (\r\n    <form className=\"stage-name-editor\" onSubmit={handleEditStageName}>\r\n      <input\r\n        className=\"rename\"\r\n        type=\"text\"\r\n        maxLength={30}\r\n        defaultValue={title}\r\n        ref={titleField}\r\n      />\r\n      <div className=\"options-row\">\r\n        <button type=\"submit\" className=\"btn-confirm\">\r\n          Save\r\n        </button>\r\n        <button className=\"btn-cancel\" onClick={() => toggleStageEditor(false)}>\r\n          Cancel\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n","/* This edits a task's title and details fields. */\r\n/* It also serves as a new task creator, and alternate\r\n/* attributes for such are marked thusly. */\r\n/* It is an uncontrolled component: */\r\n/* https://reactjs.org/docs/uncontrolled-components.html */\r\n\r\nimport { useLayoutEffect, useRef } from \"react\";\r\nimport useRequestTools from \"../hooks/useRequestTools\";\r\n\r\nexport default function TaskEditor({\r\n  taskId,\r\n  title,\r\n  details,\r\n  stageId,\r\n  toggleTaskEditor,\r\n}) {\r\n  const [createRequest, dispatch, handleApiError, PATH, token] =\r\n    useRequestTools();\r\n\r\n  const titleField = useRef(null);\r\n  const detailsField = useRef(null);\r\n\r\n  /* focus on form when element opens */\r\n  useLayoutEffect(() => {\r\n    titleField.current.focus();\r\n  });\r\n\r\n  async function handleEditTask(e) {\r\n    e.preventDefault();\r\n\r\n    /* Get new task attributes */\r\n    const newTitle = titleField.current.value;\r\n    const newDetails = detailsField.current.value;\r\n\r\n    /* Determine parameters depending on new/existing task */\r\n    let requestType, URL, dispatchType;\r\n    if (!taskId) {\r\n      // parameters for new task\r\n      requestType = \"POST\";\r\n      URL = `${PATH}/stages/${stageId}/tasks`;\r\n      dispatchType = \"task/created\";\r\n    } /* parameters for existing task */ else {\r\n      requestType = \"PATCH\";\r\n      URL = `${PATH}/stages/${stageId}/tasks/${taskId}`;\r\n      dispatchType = \"task/updated\";\r\n    }\r\n    const request = createRequest(requestType, token, {\r\n      title: newTitle,\r\n      details: newDetails,\r\n    });\r\n\r\n    /* Send request */\r\n    const response = await fetch(URL, request);\r\n    if (response.ok) {\r\n      const token = response.headers.get(\"X-Auth-Token\");\r\n      const result = await response.json();\r\n      dispatch({\r\n        type: dispatchType,\r\n        payload: { task: result, stageId: stageId },\r\n        token: token,\r\n      });\r\n      toggleTaskEditor(false); // close task creator\r\n    } else handleApiError(response);\r\n  }\r\n\r\n  return (\r\n    <form className=\"task-editor\" onSubmit={handleEditTask}>\r\n      <div className=\"task-editor-header\">\r\n        <input\r\n          className=\"task-editor-title\"\r\n          type=\"text\"\r\n          maxLength={30}\r\n          required\r\n          defaultValue={title}\r\n          placeholder={\"New Task Title\"} // placeholder for New Task\r\n          ref={titleField}\r\n        />\r\n      </div>\r\n      <textarea\r\n        className=\"task-editor-details\"\r\n        type=\"text\"\r\n        maxLength={300}\r\n        rows={4}\r\n        defaultValue={details}\r\n        placeholder={\"Details (optional)\"}\r\n        ref={detailsField}\r\n      />\r\n      <div className=\"options-row\">\r\n        <button type=\"submit\" className=\"btn-confirm\">\r\n          Save\r\n        </button>\r\n        <button\r\n          className=\"btn-cancel\"\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            toggleTaskEditor(false);\r\n          }}\r\n        >\r\n          Cancel\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n","/* A task within a stage */\r\n/* This implements Drag and Drop vertically */\r\n\r\nimport { useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport useCustomDrag from \"../hooks/useCustomDrag\";\r\nimport useRequestTools from \"../hooks/useRequestTools\";\r\nimport useVerticalDrop from \"../hooks/useVerticalDrop\";\r\nimport { ItemTypes } from \"../utils/itemTypes\";\r\nimport TaskEditor from \"./TaskEditor\";\r\n\r\nexport default function Task({\r\n  taskId,\r\n  taskIndex,\r\n  stageId,\r\n  stageIndex,\r\n  reorderTasks,\r\n}) {\r\n  const [createRequest, dispatch, handleApiError, PATH, token] =\r\n    useRequestTools();\r\n  const ref = useRef(null);\r\n  const task = useSelector(\r\n    (state) => state.project.stages[stageIndex].tasks[taskIndex]\r\n  );\r\n  const stages = useSelector((state) => state.project.stages);\r\n\r\n  const [isTaskEditorOpen, toggleTaskEditor] = useState(false);\r\n\r\n  /* Accept Drag-and-drop in vertical direction */\r\n  const [drag, isDragging] = useCustomDrag(ItemTypes.TASK, taskIndex);\r\n  const verticalDrop = useVerticalDrop(\r\n    ItemTypes.TASK,\r\n    taskIndex,\r\n    reorderTasks,\r\n    ref\r\n  );\r\n  drag(verticalDrop(ref));\r\n\r\n  async function markTaskComplete() {\r\n    /* Check existence of next stage */\r\n    if (stages.length - 1 !== stageIndex) {\r\n      /* If next stage exists, create task in new stage */\r\n      console.log(stages);\r\n      const newStageId = stages[stageIndex + 1].stageId;\r\n      const request = createRequest(\"POST\", token, {\r\n        title: task.title,\r\n        details: task.details,\r\n      });\r\n      const response = await fetch(\r\n        `${PATH}/stages/${newStageId}/tasks`,\r\n        request\r\n      );\r\n      if (response.ok) {\r\n        const token = response.headers.get(\"X-Auth-Token\");\r\n        const result = await response.json();\r\n        dispatch({\r\n          type: \"task/created\",\r\n          payload: { task: result, stageId: newStageId },\r\n          token: token,\r\n        });\r\n      } else handleApiError(response);\r\n    } /* If next stage doesn't exist, check if user wants to delete task*/ else {\r\n      if (\r\n        !window.confirm(\r\n          `Task ${task.title} is in final stage. Do you want to delete it?`\r\n        )\r\n      )\r\n        return; // abort function if user doesn't want to delete task\r\n    }\r\n\r\n    /* Delete current version of task */\r\n    const request = createRequest(\"DELETE\", token);\r\n    const response = await fetch(\r\n      `${PATH}/stages/${stageId}/tasks/${taskId}`,\r\n      request\r\n    );\r\n    if (response.ok) {\r\n      const token = response.headers.get(\"X-Auth-Token\");\r\n      dispatch({\r\n        type: \"task/deleted\",\r\n        payload: { stageId: stageId, taskId: taskId },\r\n        token: token,\r\n      });\r\n    } else handleApiError(response);\r\n  }\r\n\r\n  async function handleDeleteTask() {\r\n    if (window.confirm(\"Delete this task?\")) {\r\n      const request = createRequest(\"DELETE\", token);\r\n      const response = await fetch(\r\n        `${PATH}/stages/${stageId}/tasks/${taskId}`,\r\n        request\r\n      );\r\n      if (response.ok) {\r\n        const token = response.headers.get(\"X-Auth-Token\");\r\n        dispatch({\r\n          type: \"task/deleted\",\r\n          payload: { stageId: stageId, taskId: taskId },\r\n          token: token,\r\n        });\r\n      } else handleApiError(response);\r\n    } else return; // Abort if user does not confirm\r\n  }\r\n\r\n  if (isTaskEditorOpen) {\r\n    return (\r\n      <TaskEditor\r\n        taskId={taskId}\r\n        title={task.title}\r\n        details={task.details}\r\n        stageId={stageId}\r\n        toggleTaskEditor={toggleTaskEditor}\r\n      />\r\n    );\r\n  } else {\r\n    return (\r\n      <div className=\"task\" ref={ref} style={{ opacity: isDragging ? 0 : 1 }}>\r\n        <div className=\"task-header\">\r\n          <p className=\"task-title\">{task.title}</p>\r\n          <div className=\"dropdown task-options\">\r\n            <button className=\"btn-task-options\">☰</button>\r\n            <div className=\"dropdown-menu\">\r\n              <button\r\n                className=\"btn-mark-task-complete\"\r\n                onClick={() => markTaskComplete()}\r\n              >\r\n                Mark Complete\r\n              </button>\r\n              <button\r\n                className=\"btn-open-task-editor\"\r\n                onClick={() => toggleTaskEditor(true)}\r\n              >\r\n                Edit Task\r\n              </button>\r\n              <button\r\n                className=\"btn-delete-task\"\r\n                onClick={() => handleDeleteTask()}\r\n              >\r\n                Delete Task\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* Discard details if empty to preserve aesthetic formatting */}\r\n        {task.details && <p className=\"task-details\">{task.details}</p>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/* A stage of a project. */\r\n/* These stages implement Drag and Drop horizontally*/\r\n\r\nimport { useCallback, useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport useCustomDrag from \"../hooks/useCustomDrag\";\r\nimport useHorizontalDrop from \"../hooks/useHorizontalDrop\";\r\nimport useRequestTools from \"../hooks/useRequestTools\";\r\nimport useVerticalDrop from \"../hooks/useVerticalDrop\";\r\nimport { ItemTypes } from \"../utils/itemTypes\";\r\nimport StageEditor from \"./StageEditor\";\r\nimport Task from \"./Task\";\r\nimport TaskEditor from \"./TaskEditor\";\r\n\r\nexport default function Stage({\r\n  stageId,\r\n  stageIndex,\r\n  projectId,\r\n  reorderStages,\r\n}) {\r\n  const [createRequest, dispatch, handleApiError, PATH, token] =\r\n    useRequestTools();\r\n  const stageRef = useRef(null);\r\n  const stage = useSelector((state) => state.project.stages[stageIndex]);\r\n  const tasks = useSelector((state) => state.project.stages[stageIndex].tasks);\r\n\r\n  const [isTaskCreatorOpen, toggleTaskCreator] = useState(false); // toggle task creator open or closed\r\n  const [isStageEditorOpen, toggleStageEditor] = useState(false);\r\n\r\n  /* Accept Drag-and-drop in both horizontal and vertical directions */\r\n  const [drag, isDragging] = useCustomDrag(ItemTypes.STAGE, stageIndex);\r\n  const horizontalDrop = useHorizontalDrop(\r\n    ItemTypes.STAGE,\r\n    stageIndex,\r\n    reorderStages,\r\n    stageRef\r\n  );\r\n  const verticalDrop = useVerticalDrop(\r\n    ItemTypes.STAGE,\r\n    stageIndex,\r\n    reorderStages,\r\n    stageRef\r\n  );\r\n  drag(horizontalDrop(stageRef));\r\n  drag(verticalDrop(stageRef));\r\n\r\n  /* Reorder tasks */\r\n  const reorderTasks = useCallback(\r\n    async (sourceIndex, hoverIndex) => {\r\n      if (!token) return; // abort if user logged out\r\n      const newTasks = [...tasks]; // copy state for mutations\r\n      newTasks.splice(hoverIndex, 0, newTasks.splice(sourceIndex, 1)[0]);\r\n\r\n      /* dispatch reorder to redux state (optimistic update for performance) */\r\n      dispatch({\r\n        type: \"stage/reorderTasks\",\r\n        payload: { stageId: stageId, tasks: newTasks },\r\n      });\r\n\r\n      /* send API request */\r\n      const request = createRequest(\"PATCH\", token, {\r\n        tasks: newTasks,\r\n      });\r\n      const response = await fetch(`${PATH}/stages/${stageId}`, request);\r\n      if (response.ok) {\r\n        const token = response.headers.get(\"X-Auth-Token\");\r\n        if (token) dispatch({ type: \"token/refresh\", token: token });\r\n      } else handleApiError(response);\r\n    },\r\n    [tasks, token, stageId, dispatch, PATH, createRequest, handleApiError] //dependency array\r\n  );\r\n\r\n  async function handleDeleteStage() {\r\n    if (window.confirm(`Delete stage ${stage.title} ?`)) {\r\n      const request = createRequest(\"DELETE\", token);\r\n      const response = await fetch(`${PATH}/stages/${stageId}`, request);\r\n      if (response.ok) {\r\n        const token = response.headers.get(\"X-Auth-Token\");\r\n        dispatch({\r\n          type: \"stage/deleted\",\r\n          payload: { stageId: stageId },\r\n          token: token,\r\n        });\r\n      } else handleApiError(response);\r\n    } else return; // Abort if user does not confirm\r\n  }\r\n\r\n  const taskList = tasks ? (\r\n    tasks.map((task, index) => {\r\n      return (\r\n        <Task\r\n          key={task.taskId}\r\n          taskId={task.taskId}\r\n          taskIndex={index}\r\n          stageId={stageId}\r\n          stageIndex={stageIndex}\r\n          reorderTasks={reorderTasks}\r\n        />\r\n      );\r\n    })\r\n  ) : (\r\n    /* display only page break if no tasks exist */\r\n    <br />\r\n  );\r\n\r\n  return (\r\n    <section\r\n      className=\"stage\"\r\n      key={stageId}\r\n      ref={stageRef}\r\n      style={{ opacity: isDragging ? 0 : 1 }}\r\n    >\r\n      <div className=\"stage-header\">\r\n        <button\r\n          className=\"btn-toggle-task-creator\"\r\n          onClick={() => toggleTaskCreator(true)}\r\n          title=\"Add a new task\"\r\n        >\r\n          ➕\r\n        </button>\r\n        {isStageEditorOpen ? (\r\n          <StageEditor\r\n            stageId={stageId}\r\n            title={stage.title}\r\n            toggleStageEditor={toggleStageEditor}\r\n          />\r\n        ) : (\r\n          <h3\r\n            className=\"stage-title\"\r\n            title=\"Click and drag to rearrange stages\"\r\n          >\r\n            {stage.title}\r\n          </h3>\r\n        )}\r\n        <div className=\"dropdown stage-options\">\r\n          <button className=\"btn-stage-options\">☰</button>\r\n          <div className=\"dropdown-menu\">\r\n            <button onClick={() => toggleStageEditor(true)}>\r\n              Rename Stage\r\n            </button>\r\n            <button onClick={() => handleDeleteStage()}>Delete Stage</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {isTaskCreatorOpen && (\r\n        <TaskEditor // TaskEditor serves as TaskCreator, given unique props\r\n          taskId={null}\r\n          title={null}\r\n          details={null}\r\n          stageId={stageId}\r\n          toggleTaskEditor={toggleTaskCreator} // toggleTaskCreator in place of toggleTaskEditor\r\n        />\r\n      )}\r\n      {taskList}\r\n    </section>\r\n  );\r\n}\r\n","/* This creates a new stage */\r\n/* It is an uncontrolled component: */\r\n/* https://reactjs.org/docs/uncontrolled-components.html */\r\n\r\nimport { useLayoutEffect, useRef } from \"react\";\r\nimport useRequestTools from \"../hooks/useRequestTools\";\r\n\r\nexport default function StageCreator({ projectId, toggleStageCreator }) {\r\n  const [createRequest, dispatch, handleApiError, PATH, token] =\r\n    useRequestTools();\r\n  const stageCreatorElement = useRef(null);\r\n  const titleField = useRef(null);\r\n\r\n  /* After load, remove .hidden-below class of stage creator for animation */\r\n  useLayoutEffect(() => {\r\n    window.setTimeout(() => {\r\n      if (!stageCreatorElement.current) return;\r\n      stageCreatorElement.current.classList.remove(\"hidden-below\");\r\n    }, 1); // Timeout ensures effect fires after DOM painting\r\n  }, [stageCreatorElement]);\r\n\r\n  /* After load and animation, focus on titleField */\r\n  useLayoutEffect(() => {\r\n    window.setTimeout(() => {\r\n      if (!titleField.current) return;\r\n      titleField.current.focus();\r\n    }, 450); // timeout = css transition time + 50ms\r\n  }, [titleField]);\r\n\r\n  async function handleCreateStage(e) {\r\n    e.preventDefault();\r\n    const request = createRequest(\"POST\", token, {\r\n      title: titleField.current.value,\r\n      projectId: projectId,\r\n    });\r\n    const response = await fetch(`${PATH}/stages`, request);\r\n    if (response.ok) {\r\n      const token = response.headers.get(\"X-Auth-Token\");\r\n      const result = await response.json();\r\n      dispatch({\r\n        type: \"stage/created\",\r\n        payload: result,\r\n        token: token,\r\n      });\r\n      toggleStageCreator(false);\r\n    } else handleApiError(response);\r\n  }\r\n\r\n  return (\r\n    <section className=\"stage-creator hidden-below\" ref={stageCreatorElement}>\r\n      <form onSubmit={(e) => handleCreateStage(e)}>\r\n        <h3>Create Stage:</h3>\r\n        <input type=\"text\" maxLength={26} required ref={titleField} />\r\n        <button className=\"btn-confirm\" type=\"submit\">\r\n          Save\r\n        </button>\r\n        <button\r\n          className=\"btn-toggle-stage-creator btn-cancel\"\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            toggleStageCreator(false);\r\n          }}\r\n        >\r\n          Cancel\r\n        </button>\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\n","/* A board representing a project filled with stages. */\r\n\r\nimport { useCallback, useEffect } from \"react\";\r\nimport { shallowEqual, useSelector } from \"react-redux\";\r\nimport useRequestTools from \"../hooks/useRequestTools\";\r\nimport Stage from \"./Stage\";\r\nimport StageCreator from \"./StageCreator\";\r\n\r\nexport default function ProjectBoard({\r\n  isStageCreatorOpen,\r\n  toggleStageCreator,\r\n}) {\r\n  const [createRequest, dispatch, handleApiError, PATH, token] =\r\n    useRequestTools();\r\n  const projectId = useSelector((state) => state.project.projectId);\r\n  const stages = useSelector((state) => state.project.stages, shallowEqual);\r\n\r\n  /* On project load, open stage creator if no stages exist yet */\r\n  useEffect(() => {\r\n    if (stages.length === 0) {\r\n      toggleStageCreator(true);\r\n    } else toggleStageCreator(false);\r\n  }, [projectId, stages.length, toggleStageCreator]);\r\n\r\n  /* Reorder stages */\r\n  const reorderStages = useCallback(\r\n    async (sourceIndex, hoverIndex) => {\r\n      if (!token) return; // abort if user logged out\r\n      const newStages = [...stages]; // copy state for mutations\r\n      newStages.splice(hoverIndex, 0, newStages.splice(sourceIndex, 1)[0]);\r\n\r\n      /* dispatch reorder to redux state (optimistic update for performance) */\r\n      dispatch({ type: \"project/reorderStages\", payload: newStages });\r\n\r\n      /* send API request */\r\n      const request = createRequest(\"PATCH\", token, {\r\n        stages: newStages.map((stage) => stage.stageId), // send array of stageIds\r\n      });\r\n      const response = await fetch(`${PATH}/projects/${projectId}`, request);\r\n      if (response.ok) {\r\n        const token = response.headers.get(\"X-Auth-Token\");\r\n        if (token) dispatch({ type: \"token/refresh\", token: token });\r\n      } else handleApiError(response);\r\n    },\r\n    [stages, token, projectId, createRequest, dispatch, handleApiError, PATH] //dependency array\r\n  );\r\n\r\n  const stageList = stages?.map((stage, index) => (\r\n    <Stage\r\n      key={stage.stageId}\r\n      stageId={stage.stageId}\r\n      stageIndex={index}\r\n      projectId={projectId}\r\n      reorderStages={reorderStages}\r\n    />\r\n  ));\r\n\r\n  return (\r\n    <main id=\"project-board\">\r\n      {stageList}\r\n      {isStageCreatorOpen && (\r\n        <StageCreator\r\n          projectId={projectId}\r\n          toggleStageCreator={toggleStageCreator}\r\n        />\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n","/* Main Component displays project interface */\r\n\r\nimport { useState } from \"react\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport Header from \"../Header\";\r\nimport Navbar from \"../Navbar\";\r\nimport ProjectBoard from \"../ProjectBoard\";\r\n\r\nexport default function ProjectPage() {\r\n  const [isStageCreatorOpen, toggleStageCreator] = useState(false);\r\n\r\n  return (\r\n    <DndProvider backend={HTML5Backend}>\r\n      <Header />\r\n      <Navbar />\r\n      <ProjectBoard\r\n        isStageCreatorOpen={isStageCreatorOpen}\r\n        toggleStageCreator={toggleStageCreator}\r\n      />\r\n      <button\r\n        id=\"btn-open-stage-creator\"\r\n        onClick={() => toggleStageCreator(true)}\r\n      >\r\n        ➕ Add Stage\r\n      </button>\r\n    </DndProvider>\r\n  );\r\n}\r\n","/* This page contains user settings control as well as list of projects */\r\n\r\nimport { useSelector } from \"react-redux\";\r\nimport { NavLink, Outlet } from \"react-router-dom\";\r\nimport Header from \"../Header\";\r\n\r\nexport default function UserPage() {\r\n  const user = useSelector((state) => state.user);\r\n\r\n  let activeStyle = {\r\n    borderLeft: \"1px solid black\",\r\n    borderTop: \"1px solid black\",\r\n    borderRight: \"1px solid black\",\r\n    color: \"#000000\",\r\n  };\r\n  let inactiveStyle = {\r\n    color: \"#444444\",\r\n  };\r\n\r\n  const userSettingsButton =\r\n    user.flag === \"TEMP\" ? (\r\n      <NavLink\r\n        to=\"signup\"\r\n        className=\"tab\"\r\n        style={({ isActive }) => (isActive ? activeStyle : inactiveStyle)}\r\n      >\r\n        Sign Up\r\n      </NavLink>\r\n    ) : (\r\n      <NavLink\r\n        to=\"settings\"\r\n        className=\"tab\"\r\n        style={({ isActive }) => (isActive ? activeStyle : inactiveStyle)}\r\n      >\r\n        User Settings\r\n      </NavLink>\r\n    );\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <nav id=\"user-tabs\" className=\"tab-row\">\r\n        <NavLink\r\n          className=\"tab\"\r\n          to=\"projects\"\r\n          style={({ isActive }) => (isActive ? activeStyle : inactiveStyle)}\r\n        >\r\n          My Projects\r\n        </NavLink>\r\n        {userSettingsButton}\r\n      </nav>\r\n      <main className=\"user-page\">\r\n        <br />\r\n        <Outlet />\r\n      </main>\r\n    </>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport useRequestTools from \"../hooks/useRequestTools\";\r\n\r\nexport default function NewProjectCreator() {\r\n  const [createRequest, dispatch, handleApiError, PATH, token] =\r\n    useRequestTools();\r\n  const navigate = useNavigate();\r\n  const [isActive, toggleActive] = useState(false); // if creator is open\r\n\r\n  async function handleCreateProject(e) {\r\n    e.preventDefault();\r\n\r\n    const request = createRequest(\"POST\", token, {\r\n      title: `${document.getElementById(\"new-project-title\").value}`,\r\n    });\r\n    const response = await fetch(`${PATH}/projects/`, request);\r\n    if (response.ok) {\r\n      const token = response.headers.get(\"X-Auth-Token\");\r\n      const result = await response.json();\r\n      dispatch({\r\n        type: \"project/created\",\r\n        payload: result.project,\r\n        token: token,\r\n      });\r\n\r\n      navigate(`../project/${result.project.projectId}`);\r\n    } else handleApiError(response);\r\n  }\r\n\r\n  if (isActive) {\r\n    return (\r\n      <>\r\n        <h3>Start a new project:</h3>\r\n        <form\r\n          id=\"new-project-creator\"\r\n          className=\"form-row\"\r\n          onSubmit={handleCreateProject}\r\n        >\r\n          <input\r\n            id=\"new-project-title\"\r\n            className=\"form-input\"\r\n            placeholder=\"Project Title\"\r\n          />\r\n          <div className=\"options-row\">\r\n            <button className=\"btn-confirm\">Create Project</button>\r\n            <button\r\n              className=\"btn-cancel\"\r\n              type=\"button\"\r\n              onClick={() => toggleActive(false)}\r\n            >\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </>\r\n    );\r\n  } else {\r\n    return (\r\n      <div className=\"options-block\">\r\n        <button\r\n          id=\"btn-enable-project-creator\"\r\n          className=\"btn-confirm\"\r\n          onClick={() => toggleActive(true)}\r\n        >\r\n          Start New Project\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/* This displays and edits a project's details within the user page.*/\r\n/* It is an uncontrolled component: */\r\n/* https://reactjs.org/docs/uncontrolled-components.html */\r\n\r\nimport { useLayoutEffect, useRef } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport useRequestTools from \"../hooks/useRequestTools\";\r\n\r\nexport default function ProjectDetails({\r\n  projectId,\r\n  title,\r\n  isEditing,\r\n  selectEditor,\r\n}) {\r\n  const [createRequest, dispatch, handleApiError, PATH, token] =\r\n    useRequestTools();\r\n  const navigate = useNavigate();\r\n  const titleField = useRef(null);\r\n\r\n  /* focus on form when element opens */\r\n  useLayoutEffect(() => {\r\n    if (isEditing) titleField.current.focus();\r\n  });\r\n\r\n  /* Load project from server */\r\n  async function handleLoadProject() {\r\n    const request = createRequest(\"GET\", token);\r\n    const response = await fetch(`${PATH}/projects/${projectId}`, request);\r\n    if (response.ok) {\r\n      const token = response.headers.get(\"X-Auth-Token\");\r\n      const result = await response.json();\r\n      dispatch({\r\n        type: \"project/loaded\",\r\n        payload: result.project,\r\n        token: token,\r\n      });\r\n      navigate(`../../../projects/${projectId}`);\r\n    } else handleApiError(response);\r\n  }\r\n\r\n  async function handleDeleteProject() {\r\n    if (window.confirm(`Are you sure you wish to delete ${title}?`)) {\r\n      const request = createRequest(\"DELETE\", token);\r\n      const response = await fetch(`${PATH}/projects/${projectId}`, request);\r\n      if (response.ok) {\r\n        const token = response.headers.get(\"X-Auth-Token\");\r\n        dispatch({\r\n          type: \"project/deleted\",\r\n          payload: { projectId: projectId },\r\n          token: token,\r\n        });\r\n      } else handleApiError(response);\r\n    } else return; // Abort if user doesn't confirm delete\r\n  }\r\n\r\n  /* Edit project's title */\r\n  async function handleEditProject() {\r\n    // Get new project title\r\n    const newTitle = titleField.current.value;\r\n\r\n    const request = createRequest(\"PATCH\", token, { title: newTitle });\r\n    const response = await fetch(`${PATH}/projects/${projectId}`, request);\r\n    if (response.ok) {\r\n      const token = response.headers.get(\"X-Auth-Token\");\r\n      const result = await response.json();\r\n      dispatch({\r\n        type: \"project/updated\",\r\n        payload: result.project,\r\n        token: token,\r\n      });\r\n      selectEditor(null); // deactivate editor\r\n    } else handleApiError(response);\r\n  }\r\n\r\n  if (isEditing) {\r\n    return (\r\n      <>\r\n        <input\r\n          className=\"project-title\"\r\n          defaultValue={title}\r\n          ref={titleField}\r\n        />\r\n        <button\r\n          className=\"btn-delete-project\"\r\n          onClick={() => handleDeleteProject(projectId)}\r\n        >\r\n          Delete\r\n        </button>\r\n        <button\r\n          className=\"btn-confirm\"\r\n          onClick={() => handleEditProject(projectId)}\r\n        >\r\n          Save\r\n        </button>\r\n        <button className=\"btn-cancel\" onClick={() => selectEditor(null)}>\r\n          Cancel\r\n        </button>\r\n      </>\r\n    );\r\n  } else {\r\n    return (\r\n      <>\r\n        <div className=\"project-title\">{title}</div>\r\n        <button\r\n          className=\"btn-load-project\"\r\n          onClick={() => handleLoadProject(projectId)}\r\n        >\r\n          Load\r\n        </button>\r\n        <div className=\"dropdown options\">\r\n          <button\r\n            className=\"btn-options\"\r\n            onClick={() => selectEditor(projectId)}\r\n          >\r\n            Options\r\n          </button>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import { useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport NewProjectCreator from \"./NewProjectCreator\";\r\nimport ProjectDetails from \"./ProjectDetails\";\r\n\r\nexport default function UserProjects() {\r\n  const user = useSelector((state) => state.user);\r\n\r\n  /* Track which project details editor is open, if any */\r\n  const [activeEditor, selectEditor] = useState(null);\r\n\r\n  const listProjects = user.projects\r\n    ? user.projects.map((project) => (\r\n        <ProjectDetails\r\n          key={project.projectId}\r\n          projectId={project.projectId}\r\n          title={project.title}\r\n          isEditing={activeEditor === project.projectId}\r\n          selectEditor={selectEditor} // Can this automatically pass param project.projectID?\r\n        />\r\n      ))\r\n    : null;\r\n\r\n  return (\r\n    <div id=\"projects-menu\">\r\n      {user.projects && <div id=\"projects-list\">{listProjects}</div>}\r\n      <br />\r\n      <NewProjectCreator />\r\n      {user.flag === \"TEMP\" && (\r\n        <div className=\"options-block\">\r\n          <button id=\"signup-link\">\r\n            <NavLink to=\"../signup\" id=\"signup-link\">\r\n              Sign up to save work\r\n            </NavLink>\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/* User settings controls on User Settings Page */\r\n/* input fields are react-controlled to enable real-time suggestions */\r\n\r\nimport { useLayoutEffect, useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport useRequestTools from \"../hooks/useRequestTools\";\r\n\r\nexport default function UserSettings() {\r\n  const [createRequest, dispatch, handleApiError, PATH, token] =\r\n    useRequestTools();\r\n  const navigate = useNavigate();\r\n  const user = useSelector((state) => state.user);\r\n\r\n  /* User name field and states */\r\n  const [isEditingUsername, toggleEditingUsername] = useState(false);\r\n  const [newUsername, setNewUsername] = useState(user.name);\r\n  const usernameField = useRef(null); // focus on input field when editing is toggled\r\n  useLayoutEffect(() => {\r\n    if (isEditingUsername) usernameField.current.focus();\r\n  }, [isEditingUsername]);\r\n\r\n  /* Email address field and state */\r\n  const [isEditingEmail, toggleEditingEmail] = useState(false);\r\n  const [newEmail, setNewEmail] = useState(user.email);\r\n  const emailField = useRef(null); // focus on input field when editing is toggled\r\n  useLayoutEffect(() => {\r\n    if (isEditingEmail) emailField.current.focus();\r\n  }, [isEditingEmail]);\r\n\r\n  /* Password field and state */\r\n  const [isEditingPassword, toggleEditingPassword] = useState(false);\r\n  const currentPasswordField = useRef(null);\r\n  const newPasswordField1 = useRef(null);\r\n  const newPasswordField2 = useRef(null);\r\n\r\n  /* Delete user field and state */\r\n  const [isDeletingUser, toggleDeletingUser] = useState(false);\r\n  const deleteUserPassword = useRef(null);\r\n\r\n  async function editUsername(e) {\r\n    e.preventDefault();\r\n    const request = createRequest(\"PATCH\", token, {\r\n      name: newUsername,\r\n    });\r\n    const response = await fetch(`${PATH}/users/`, request);\r\n    if (response.ok) {\r\n      const token = response.headers.get(\"X-Auth-Token\");\r\n      const result = await response.json();\r\n      toggleEditingUsername(false);\r\n      dispatch({ type: \"user/patched\", payload: result, token: token });\r\n      alert(\"Username successfully changed\");\r\n    } else handleApiError(response);\r\n  }\r\n\r\n  async function editEmail(e) {\r\n    e.preventDefault();\r\n    const request = createRequest(\"PATCH\", token, {\r\n      email: newEmail,\r\n    });\r\n    const response = await fetch(`${PATH}/users/`, request);\r\n    if (response.ok) {\r\n      const token = response.headers.get(\"X-Auth-Token\");\r\n      const result = await response.json();\r\n      toggleEditingEmail(false);\r\n      dispatch({ type: \"user/patched\", payload: result, token: token });\r\n      alert(\"Email address successfully changed\");\r\n    } else handleApiError(response);\r\n  }\r\n\r\n  async function editPassword(e) {\r\n    e.preventDefault();\r\n    const currentPassword = currentPasswordField.current.value;\r\n    const newPassword1 = newPasswordField1.current.value;\r\n    const newpassword2 = newPasswordField2.current.value;\r\n    if (newPassword1 !== newpassword2) {\r\n      alert(\"New passwords do not match\");\r\n    } else {\r\n      const request = createRequest(\"PATCH\", token, {\r\n        email: user.email,\r\n        oldPassword: currentPassword,\r\n        newPassword: newPassword1,\r\n      });\r\n      const response = await fetch(`${PATH}/users`, request);\r\n      if (response.ok) {\r\n        const token = response.headers.get(\"X-Auth-Token\");\r\n        toggleEditingPassword(false);\r\n        dispatch({ type: \"user/patched\", payload: {}, token: token });\r\n        alert(\"Password successfully changed\");\r\n      } else handleApiError(response);\r\n    }\r\n  }\r\n\r\n  async function deleteUser() {\r\n    /* full password check occurs server-side */\r\n    if (deleteUserPassword.current.value !== \"\") {\r\n      const request = createRequest(\"DELETE\", token);\r\n      const response = await fetch(`${PATH}/users`, request);\r\n      if (response.ok) {\r\n        const token = response.headers.get(\"X-AUTH-TOKEN\");\r\n        dispatch({ type: \"user/deleted\", payload: {}, token: token });\r\n        alert(\"User deleted\");\r\n        navigate(\"/\");\r\n      } else handleApiError(response);\r\n    } else return;\r\n  }\r\n\r\n  async function resetPasswordFields() {\r\n    document.getElementById(\"current-password\").value = \"\";\r\n    document.getElementById(\"new-password-1\").value = \"\";\r\n    document.getElementById(\"new-password-2\").value = \"\";\r\n    toggleEditingPassword(false);\r\n  }\r\n\r\n  const usernameSection = isEditingUsername ? (\r\n    <>\r\n      <input\r\n        className=\"input-left\"\r\n        defaultValue={user.name}\r\n        onChange={(e) => setNewUsername(e.target.value)}\r\n        ref={usernameField}\r\n      />\r\n      <button className=\"btn-confirm\" type=\"button\" onClick={editUsername}>\r\n        Save\r\n      </button>\r\n      <button\r\n        className=\"btn-cancel\"\r\n        type=\"button\"\r\n        onClick={() => {\r\n          toggleEditingUsername(false);\r\n          setNewUsername(user.name);\r\n        }}\r\n      >\r\n        Cancel\r\n      </button>\r\n    </>\r\n  ) : (\r\n    <>\r\n      <p>{user.name}</p>\r\n      <button\r\n        className=\"btn-edit-field\"\r\n        onClick={() => toggleEditingUsername(true)}\r\n      >\r\n        Edit\r\n      </button>\r\n    </>\r\n  );\r\n\r\n  const emailAddressSection = isEditingEmail ? (\r\n    <>\r\n      <input\r\n        className=\"input-left\"\r\n        value={newEmail}\r\n        onChange={(e) => setNewEmail(e.target.value)}\r\n        ref={emailField}\r\n      />\r\n      <button className=\"btn-confirm\" type=\"button\" onClick={editEmail}>\r\n        Save\r\n      </button>\r\n      <button\r\n        className=\"btn-cancel\"\r\n        type=\"button\"\r\n        onClick={() => {\r\n          toggleEditingEmail(false);\r\n          setNewEmail(user.email);\r\n        }}\r\n      >\r\n        Cancel\r\n      </button>\r\n    </>\r\n  ) : (\r\n    <>\r\n      <p>{user.email}</p>\r\n      <button\r\n        className=\"btn-edit-field\"\r\n        onClick={() => toggleEditingEmail(true)}\r\n      >\r\n        Edit\r\n      </button>\r\n    </>\r\n  );\r\n\r\n  const passwordSection = isEditingPassword ? (\r\n    <div id=\"password-input-fields\">\r\n      <div className=\"password-subsection\">\r\n        <p className=\"password-field-label\">Current password:</p>\r\n        <input\r\n          id=\"current-password\"\r\n          className=\"input-right\"\r\n          ref={currentPasswordField}\r\n        />\r\n      </div>\r\n      <div className=\"password-subsection\">\r\n        <p>Enter new password:</p>\r\n        <input\r\n          id=\"new-password-1\"\r\n          className=\"input-right\"\r\n          ref={newPasswordField1}\r\n        />\r\n      </div>\r\n      <div className=\"password-subsection\">\r\n        <p>Re-enter new password:</p>\r\n        <input\r\n          id=\"new-password-2\"\r\n          className=\"input-right\"\r\n          ref={newPasswordField2}\r\n        />\r\n      </div>\r\n\r\n      <button className=\"btn-confirm left\" onClick={editPassword}>\r\n        Save\r\n      </button>\r\n      <button\r\n        className=\"btn-cancel right\"\r\n        onClick={() => resetPasswordFields()}\r\n      >\r\n        Cancel\r\n      </button>\r\n    </div>\r\n  ) : (\r\n    <button\r\n      className=\"btn-change-password center\"\r\n      onClick={() => toggleEditingPassword(true)}\r\n    >\r\n      Change Password\r\n    </button>\r\n  );\r\n\r\n  const deleteUserSection = isDeletingUser ? (\r\n    <div className=\"delete-user-section\">\r\n      <p>To delete your account, please enter your password:</p>\r\n      <input ref={deleteUserPassword} />\r\n      <button\r\n        id=\"btn-confirm-delete-user\"\r\n        className=\"btn-delete\"\r\n        onClick={() => deleteUser()}\r\n      >\r\n        Permanently Delete User\r\n      </button>\r\n      <button\r\n        id=\"btn-cancel-delete-user\"\r\n        className=\"btn-cancel\"\r\n        onClick={() => toggleDeletingUser(false)}\r\n      >\r\n        Cancel\r\n      </button>\r\n    </div>\r\n  ) : (\r\n    <button\r\n      id=\"btn-delete-user\"\r\n      className=\"btn-delete\"\r\n      onClick={() => toggleDeletingUser(true)}\r\n    >\r\n      Delete User\r\n    </button>\r\n  );\r\n\r\n  return (\r\n    <div id=\"user-settings-menu\">\r\n      <div id=\"user-settings-grid\">\r\n        <h3>User Name</h3>\r\n        {usernameSection}\r\n        <h3>Email Address</h3>\r\n        {emailAddressSection}\r\n        <h3>Password</h3>\r\n      </div>\r\n      {passwordSection}\r\n      <br />\r\n      {deleteUserSection}\r\n    </div>\r\n  );\r\n}\r\n","/* Entry point for React frontend. This SPA (single page application) */\r\n/* is routed by React-router library. Each <Route /> element renders */\r\n/* its children at the specified path. */\r\n\r\n/* React-router elements */\r\nimport { BrowserRouter, Outlet, Route, Routes } from \"react-router-dom\";\r\n\r\n/* Components */\r\nimport HomePage from \"./Pages/HomePage\";\r\nimport LogoutPage from \"./Pages/LogoutPage\";\r\nimport ProjectPage from \"./Pages/ProjectPage\";\r\nimport UserPage from \"./Pages/UserPage\";\r\nimport ProjectsMenu from \"./ProjectsMenu\";\r\nimport SignupForm from \"./SignupForm\";\r\nimport UserSettingsMenu from \"./UserSettingsMenu\";\r\n\r\n/* Styles */\r\nimport \"../styles/normalize.scss\"; // import normalize.scss first for proper css prioritization\r\n\r\nimport \"../styles/dropdown.scss\";\r\nimport \"../styles/header.scss\";\r\nimport \"../styles/homePage.scss\";\r\nimport \"../styles/index.scss\";\r\nimport \"../styles/projectPage.scss\";\r\nimport \"../styles/projectsMenu.scss\";\r\nimport \"../styles/stage.scss\";\r\nimport \"../styles/tabRow.scss\";\r\nimport \"../styles/task.scss\";\r\nimport \"../styles/taskEditor.scss\";\r\nimport \"../styles/userPage.scss\";\r\nimport \"../styles/userSettingsMenu.scss\";\r\n\r\nexport default function App() {\r\n  return (\r\n    <BrowserRouter>\r\n      <Routes>\r\n        <Route path=\"/\" element={<Outlet />}>\r\n          <Route index element={<HomePage />} />\r\n          <Route path=\"logout\" element={<LogoutPage />} />\r\n\r\n          <Route path=\"users/:userId/\" element={<UserPage />}>\r\n            <Route path=\"projects\" element={<ProjectsMenu />} />\r\n            <Route path=\"settings\" element={<UserSettingsMenu />} />\r\n          </Route>\r\n\r\n          <Route path=\"preview/:userId/\" element={<UserPage />}>\r\n            <Route path=\"projects\" element={<ProjectsMenu />} />\r\n            <Route path=\"signup\" element={<SignupForm active=\"true\" />} />\r\n          </Route>\r\n\r\n          <Route path=\"projects/:projectId\" element={<ProjectPage />} />\r\n          <Route path=\"preview/project/projectId\" element={<ProjectPage />} />\r\n\r\n          <Route path=\"*\" element={<HomePage />} />\r\n        </Route>\r\n      </Routes>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n","/* Top-level frontend script */\r\n\r\n/* React modules */\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\n\r\n/* Redux modules and reducer */\r\nimport { Provider } from \"react-redux\";\r\nimport { createStore } from \"redux\";\r\nimport rootReducer from \"./state/rootReducer\";\r\n\r\n/* Main component */\r\nimport App from \"./components/App\";\r\n\r\n/* Render React app within Redux provider */\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={createStore(rootReducer)}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}